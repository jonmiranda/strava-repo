package com.strava;

import com.strava.models.Activity;
import com.strava.models.Segment;
import com.strava.models.SegmentEffort;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

import javax.net.ssl.HttpsURLConnection;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

/**
 * Network module.
 */
public class NetworkModule {
  private final String authorizationValue = "Bearer dfa30a9ed2797438758f204d503ada03e94b31fc";

  public BufferedReader getHttpsResponse(String url) {
    BufferedReader br = null;
    try {
      HttpsURLConnection httpsCon = (HttpsURLConnection) new URL(url).openConnection();
      httpsCon.setRequestProperty("Authorization", authorizationValue);
      br = new BufferedReader(new InputStreamReader(httpsCon.getInputStream()));
    } catch (Exception e) {
      e.printStackTrace();
    }
    return br;
  }

  public List<Segment> getSegmentTargets(double latitude, double longitude) {
    List<Segment> segmentTargets = new ArrayList<>();
    String d1 = "{\"targets\":[{\"segment_id\":229781,\"start_latlng\":[37.833111863583326,-122.48343558982015],\"end_latlng\":[37.82807216048241,-122.49813929200172],\"tile_steps\":[[335058,1286988],[335058,1286987],[335058,1286986],[335058,1286985],[335058,1286984],[335058,1286983],[335058,1286982],[335058,1286981],[335057,1286981],[335057,1286980],[335057,1286979],[335056,1286979],[335056,1286978],[335055,1286978],[335055,1286977],[335055,1286976],[335055,1286975],[335054,1286975],[335054,1286974],[335054,1286973],[335054,1286972],[335054,1286971],[335054,1286970],[335054,1286969],[335054,1286968],[335054,1286967],[335055,1286967],[335055,1286966],[335056,1286966],[335056,1286965],[335057,1286965],[335057,1286964],[335058,1286964],[335058,1286963],[335058,1286962],[335058,1286961],[335057,1286961],[335056,1286961],[335055,1286961],[335054,1286961],[335053,1286961],[335052,1286961],[335051,1286961],[335050,1286961],[335049,1286961],[335048,1286961],[335047,1286961],[335047,1286960],[335046,1286960],[335046,1286959],[335045,1286959],[335045,1286958],[335044,1286958],[335044,1286957],[335043,1286957],[335043,1286956],[335042,1286956],[335041,1286956],[335041,1286957],[335040,1286957],[335040,1286958],[335039,1286958],[335039,1286959],[335038,1286959],[335038,1286960],[335038,1286961],[335038,1286962],[335038,1286963],[335038,1286964],[335038,1286965],[335038,1286966],[335038,1286967],[335038,1286968],[335038,1286969],[335037,1286969],[335037,1286970],[335037,1286971],[335037,1286972],[335037,1286973],[335036,1286973],[335036,1286974],[335035,1286974],[335035,1286975],[335035,1286976],[335035,1286977],[335034,1286977],[335034,1286978],[335034,1286979],[335033,1286979],[335033,1286980],[335032,1286980],[335032,1286981],[335031,1286981],[335031,1286982],[335030,1286982],[335030,1286983],[335030,1286984],[335029,1286984],[335029,1286985],[335028,1286985],[335028,1286986],[335027,1286986],[335026,1286986],[335025,1286986],[335024,1286986],[335023,1286986],[335023,1286985],[335022,1286985],[335021,1286985],[335021,1286984],[335020,1286984],[335019,1286984],[335019,1286985],[335018,1286985],[335018,1286986],[335017,1286986],[335016,1286986],[335015,1286986],[335015,1286985],[335014,1286985],[335014,1286984],[335013,1286984],[335013,1286983],[335012,1286983],[335011,1286983],[335010,1286983],[335010,1286984],[335009,1286984],[335009,1286985],[335009,1286986],[335008,1286986],[335008,1286987],[335008,1286988],[335007,1286988],[335007,1286989],[335006,1286989],[335006,1286990],[335005,1286990],[335004,1286990],[335004,1286991],[335003,1286991],[335002,1286991],[335001,1286991],[335000,1286991],[334999,1286991],[334999,1286992],[334998,1286992],[334997,1286992],[334997,1286991],[334996,1286991],[334995,1286991],[334995,1286990],[334994,1286990],[334994,1286989],[334993,1286989],[334993,1286988],[334992,1286988],[334992,1286987],[334992,1286986],[334991,1286986],[334991,1286985],[334991,1286984],[334991,1286983],[334990,1286983],[334990,1286982],[334990,1286981],[334990,1286980],[334990,1286979],[334989,1286979],[334989,1286978],[334988,1286978],[334987,1286978],[334986,1286978],[334985,1286978],[334984,1286978],[334983,1286978],[334982,1286978],[334981,1286978],[334981,1286977],[334980,1286977],[334979,1286977],[334978,1286977],[334978,1286976],[334977,1286976],[334977,1286975],[334976,1286975],[334976,1286974],[334976,1286973],[334975,1286973],[334975,1286972],[334975,1286971],[334975,1286970],[334974,1286970],[334974,1286969],[334973,1286969],[334972,1286969],[334972,1286968],[334971,1286968],[334971,1286967],[334970,1286967],[334970,1286966],[334970,1286965],[334970,1286964],[334970,1286963],[334971,1286963],[334971,1286962],[334971,1286961],[334971,1286960],[334971,1286959],[334972,1286959],[334972,1286958],[334972,1286957],[334973,1286957],[334973,1286956],[334973,1286955],[334974,1286955],[334974,1286954],[334974,1286953],[334974,1286952],[334974,1286951],[334973,1286951],[334973,1286950],[334972,1286950]],\"segment\":{\"id\":229781,\"resource_state\":2,\"name\":\"Hawk Hill\",\"activity_type\":\"Ride\",\"distance\":2684.82,\"average_grade\":5.7,\"maximum_grade\":14.2,\"elevation_high\":245.3,\"elevation_low\":92.4,\"start_latlng\":[37.8331119,-122.4834356],\"end_latlng\":[37.8280722,-122.4981393],\"start_latitude\":37.8331119,\"start_longitude\":-122.4834356,\"end_latitude\":37.8280722,\"end_longitude\":-122.4981393,\"climb_category\":1,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":3,\"points\":\"}g|eFnpqjVl@En@Md@HbAd@d@^h@Xx@VbARjBDh@OPQf@w@d@k@XKXDFPH\\\\EbGT`AV`@v@|@NTNb@?XOb@cAxAWLuE@eAFMBoAv@eBt@q@b@}@tAeAt@i@dAC`AFZj@dB?~@[h@MbAVn@b@b@\\\\d@Eh@Qb@_@d@eB|@c@h@WfBK|AMpA?VF\\\\\\\\t@f@t@h@j@|@b@hCb@b@XTd@Bl@GtA?jAL`ALp@Tr@RXd@Rx@Pn@^Zh@Tx@Zf@`@FTCzDy@f@Yx@m@n@Op@VJr@\"}},{\"segment_id\":610649,\"start_latlng\":[37.71127796731889,-122.40105397067964],\"end_latlng\":[37.68978098407388,-122.39825198426843],\"tile_steps\":[[335538,1286090],[335538,1286089],[335537,1286089],[335537,1286088],[335537,1286087],[335537,1286086],[335537,1286085],[335537,1286084],[335536,1286084],[335536,1286083],[335536,1286082],[335536,1286081],[335536,1286080],[335536,1286079],[335536,1286078],[335536,1286077],[335536,1286076],[335536,1286075],[335536,1286074],[335536,1286073],[335536,1286072],[335536,1286071],[335536,1286070],[335536,1286069],[335536,1286068],[335536,1286067],[335536,1286066],[335536,1286065],[335536,1286064],[335536,1286063],[335536,1286062],[335536,1286061],[335536,1286060],[335537,1286060],[335537,1286059],[335537,1286058],[335537,1286057],[335537,1286056],[335537,1286055],[335537,1286054],[335537,1286053],[335537,1286052],[335537,1286051],[335537,1286050],[335537,1286049],[335537,1286048],[335538,1286048],[335538,1286047],[335538,1286046],[335538,1286045],[335538,1286044],[335538,1286043],[335538,1286042],[335538,1286041],[335538,1286040],[335538,1286039],[335538,1286038],[335539,1286038],[335539,1286037],[335539,1286036],[335539,1286035],[335539,1286034],[335539,1286033],[335539,1286032],[335539,1286031],[335539,1286030],[335539,1286029],[335540,1286029],[335540,1286028],[335540,1286027],[335540,1286026],[335540,1286025],[335540,1286024],[335540,1286023],[335540,1286022],[335540,1286021],[335540,1286020],[335541,1286020],[335541,1286019],[335541,1286018],[335541,1286017],[335541,1286016],[335541,1286015],[335541,1286014],[335541,1286013],[335541,1286012],[335541,1286011],[335542,1286011],[335542,1286010],[335542,1286009],[335542,1286008],[335542,1286007],[335542,1286006],[335542,1286005],[335542,1286004],[335542,1286003],[335542,1286002],[335542,1286001],[335542,1286000],[335542,1285999],[335542,1285998],[335542,1285997],[335542,1285996],[335542,1285995],[335542,1285994],[335542,1285993],[335542,1285992],[335542,1285991],[335542,1285990],[335542,1285989],[335542,1285988],[335542,1285987],[335542,1285986],[335542,1285985],[335543,1285985],[335543,1285984],[335543,1285983],[335543,1285982],[335543,1285981],[335543,1285980],[335544,1285980],[335544,1285979],[335544,1285978],[335544,1285977],[335544,1285976],[335545,1285976],[335545,1285975],[335545,1285974],[335545,1285973],[335545,1285972],[335546,1285972],[335546,1285971],[335546,1285970],[335546,1285969],[335546,1285968],[335547,1285968],[335547,1285967],[335547,1285966],[335547,1285965],[335547,1285964],[335548,1285964],[335548,1285963],[335548,1285962],[335548,1285961],[335548,1285960],[335549,1285960],[335549,1285959],[335549,1285958],[335549,1285957],[335549,1285956],[335550,1285956],[335550,1285955],[335550,1285954],[335550,1285953],[335550,1285952],[335551,1285952],[335551,1285951],[335551,1285950],[335551,1285949],[335551,1285948],[335552,1285948],[335552,1285947],[335552,1285946],[335552,1285945],[335553,1285945],[335553,1285944],[335553,1285943],[335553,1285942],[335553,1285941],[335554,1285941],[335554,1285940],[335554,1285939],[335554,1285938],[335554,1285937],[335554,1285936],[335555,1285936],[335555,1285935],[335554,1285935],[335554,1285934],[335554,1285933],[335554,1285932],[335554,1285931]],\"segment\":{\"id\":610649,\"resource_state\":2,\"name\":\"Tunnel of Pain\",\"activity_type\":\"Ride\",\"distance\":2417.46,\"average_grade\":-0.4,\"maximum_grade\":0.5,\"elevation_high\":83.1,\"elevation_low\":72.7,\"start_latlng\":[37.711278,-122.401054],\"end_latlng\":[37.689781,-122.398252],\"start_latitude\":37.711278,\"start_longitude\":-122.401054,\"end_latitude\":37.689781,\"end_longitude\":-122.398252,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"mndeFrmajVvF`ApABrDAnDKjMs@hOeA~AIlCYxGe@pBIjCEhJAvBWlK_C~FmAjJyBxCq@zAQlBP\"}},{\"segment_id\":618091,\"start_latlng\":[37.79915384016931,-122.47797352261841],\"end_latlng\":[37.79319388791919,-122.46136411093175],\"tile_steps\":[[335090,1286737],[335091,1286737],[335091,1286736],[335091,1286735],[335091,1286734],[335092,1286734],[335092,1286733],[335092,1286732],[335093,1286732],[335093,1286731],[335094,1286731],[335094,1286730],[335095,1286730],[335095,1286729],[335095,1286728],[335096,1286728],[335096,1286727],[335096,1286726],[335097,1286726],[335097,1286725],[335097,1286724],[335097,1286723],[335096,1286723],[335096,1286722],[335096,1286721],[335095,1286721],[335095,1286720],[335094,1286720],[335094,1286719],[335093,1286719],[335093,1286718],[335092,1286718],[335092,1286717],[335092,1286716],[335091,1286716],[335091,1286715],[335091,1286714],[335091,1286713],[335091,1286712],[335092,1286712],[335092,1286711],[335092,1286710],[335093,1286710],[335093,1286709],[335094,1286709],[335094,1286708],[335095,1286708],[335095,1286707],[335096,1286707],[335096,1286706],[335097,1286706],[335098,1286706],[335098,1286705],[335098,1286704],[335099,1286704],[335099,1286703],[335100,1286703],[335100,1286702],[335101,1286702],[335101,1286701],[335101,1286700],[335102,1286700],[335102,1286699],[335102,1286698],[335103,1286698],[335104,1286698],[335105,1286698],[335106,1286698],[335107,1286698],[335108,1286698],[335109,1286698],[335109,1286699],[335110,1286699],[335111,1286699],[335111,1286700],[335112,1286700],[335113,1286700],[335113,1286701],[335114,1286701],[335114,1286702],[335115,1286702],[335116,1286702],[335117,1286702],[335118,1286702],[335119,1286702],[335120,1286702],[335120,1286701],[335121,1286701],[335121,1286702],[335122,1286702],[335123,1286702],[335123,1286703],[335124,1286703],[335124,1286704],[335125,1286704],[335126,1286704],[335126,1286705],[335127,1286705],[335128,1286705],[335129,1286705],[335130,1286705],[335131,1286705],[335131,1286706],[335132,1286706],[335133,1286706],[335133,1286707],[335134,1286707],[335135,1286707],[335135,1286708],[335136,1286708],[335137,1286708],[335138,1286708],[335139,1286708],[335139,1286707],[335140,1286707],[335140,1286706],[335141,1286706],[335141,1286705],[335142,1286705],[335143,1286705],[335144,1286705],[335144,1286706],[335145,1286706],[335145,1286707],[335146,1286707],[335146,1286708],[335147,1286708],[335147,1286709],[335148,1286709],[335149,1286709],[335150,1286709],[335151,1286709],[335151,1286710],[335152,1286710],[335153,1286710],[335153,1286711],[335154,1286711],[335154,1286712],[335155,1286712],[335155,1286713],[335156,1286713],[335156,1286714],[335157,1286714],[335157,1286715],[335158,1286715],[335159,1286715],[335160,1286715],[335161,1286715],[335162,1286715],[335163,1286715],[335164,1286715],[335164,1286714],[335165,1286714],[335165,1286713],[335166,1286713],[335166,1286712],[335166,1286711],[335167,1286711],[335167,1286710],[335168,1286710],[335168,1286709],[335168,1286708],[335169,1286708],[335169,1286707],[335170,1286707],[335170,1286706],[335171,1286706],[335171,1286705],[335172,1286705],[335173,1286705],[335174,1286705],[335174,1286704],[335175,1286704],[335176,1286704],[335176,1286703],[335177,1286703],[335178,1286703],[335178,1286702],[335179,1286702],[335179,1286701],[335179,1286700],[335180,1286700],[335180,1286699],[335180,1286698],[335181,1286698],[335181,1286697],[335182,1286697],[335182,1286696],[335183,1286696],[335183,1286695],[335184,1286695],[335184,1286694],[335185,1286694],[335185,1286693],[335186,1286693]],\"segment\":{\"id\":618091,\"resource_state\":2,\"name\":\"Washington Blvd (From Kobbe to Arguello)\",\"activity_type\":\"Ride\",\"distance\":2330.18,\"average_grade\":0.4,\"maximum_grade\":19.7,\"elevation_high\":102.0,\"elevation_low\":82.8,\"start_latlng\":[37.7991538401693,-122.477973522618],\"end_latlng\":[37.7931938879192,-122.461364110932],\"start_latitude\":37.7991538401693,\"start_longitude\":-122.477973522618,\"end_latitude\":37.7931938879192,\"end_longitude\":-122.461364110932,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"usueFjnpjV?WDKvAe@h@a@bA_An@a@fAg@J?|@LTLf@^x@hAPRb@X\\\\PJBf@CZK\\\\Ov@{@rAaC`CaCHEf@QRORg@AsAOoBq@iBe@aAMu@DsAJoAK_AUg@g@u@[_B?kAM_Aw@cBMeABs@DUZ_@\\\\UNWB]Go@e@y@]]Se@c@{COe@EK_BaB_@iAAwANmA`@y@dBaBx@c@n@q@Vq@N{A`@qAFc@RYpAk@n@k@Zg@`@e@j@i@JOJe@ECIA\"}},{\"segment_id\":623484,\"start_latlng\":[37.79595673084259,-122.47773438692093],\"end_latlng\":[37.79029777273536,-122.45873286388814],\"tile_steps\":[[335091,1286714],[335091,1286713],[335091,1286712],[335092,1286712],[335092,1286711],[335092,1286710],[335093,1286710],[335093,1286709],[335094,1286709],[335094,1286708],[335095,1286708],[335095,1286707],[335096,1286707],[335096,1286706],[335097,1286706],[335097,1286705],[335098,1286705],[335098,1286704],[335099,1286704],[335099,1286703],[335100,1286703],[335100,1286702],[335101,1286702],[335101,1286701],[335102,1286701],[335102,1286700],[335102,1286699],[335102,1286698],[335103,1286698],[335103,1286697],[335104,1286697],[335105,1286697],[335105,1286696],[335106,1286696],[335106,1286697],[335107,1286697],[335108,1286697],[335109,1286697],[335109,1286698],[335110,1286698],[335110,1286699],[335111,1286699],[335112,1286699],[335112,1286700],[335113,1286700],[335113,1286701],[335114,1286701],[335115,1286701],[335115,1286702],[335116,1286702],[335117,1286702],[335118,1286702],[335119,1286702],[335120,1286702],[335121,1286702],[335122,1286702],[335123,1286702],[335124,1286702],[335124,1286703],[335125,1286703],[335125,1286704],[335126,1286704],[335127,1286704],[335127,1286705],[335128,1286705],[335129,1286705],[335130,1286705],[335130,1286706],[335131,1286706],[335132,1286706],[335133,1286706],[335133,1286707],[335134,1286707],[335134,1286708],[335135,1286708],[335136,1286708],[335136,1286709],[335137,1286709],[335137,1286708],[335138,1286708],[335139,1286708],[335140,1286708],[335140,1286707],[335141,1286707],[335141,1286706],[335142,1286706],[335143,1286706],[335144,1286706],[335145,1286706],[335145,1286707],[335146,1286707],[335147,1286707],[335147,1286708],[335148,1286708],[335148,1286709],[335149,1286709],[335150,1286709],[335151,1286709],[335151,1286710],[335152,1286710],[335153,1286710],[335153,1286711],[335154,1286711],[335154,1286712],[335155,1286712],[335155,1286713],[335156,1286713],[335156,1286714],[335157,1286714],[335157,1286715],[335158,1286715],[335159,1286715],[335159,1286716],[335160,1286716],[335161,1286716],[335161,1286715],[335162,1286715],[335163,1286715],[335164,1286715],[335164,1286714],[335165,1286714],[335166,1286714],[335166,1286713],[335167,1286713],[335167,1286712],[335167,1286711],[335168,1286711],[335168,1286710],[335169,1286710],[335169,1286709],[335169,1286708],[335170,1286708],[335170,1286707],[335170,1286706],[335171,1286706],[335172,1286706],[335172,1286705],[335173,1286705],[335173,1286704],[335174,1286704],[335175,1286704],[335176,1286704],[335177,1286704],[335178,1286704],[335178,1286703],[335179,1286703],[335179,1286702],[335180,1286702],[335180,1286701],[335180,1286700],[335181,1286700],[335181,1286699],[335181,1286698],[335182,1286698],[335182,1286697],[335183,1286697],[335183,1286696],[335183,1286695],[335184,1286695],[335184,1286694],[335185,1286694],[335185,1286693],[335185,1286692],[335186,1286692],[335186,1286691],[335187,1286691],[335187,1286690],[335188,1286690],[335188,1286689],[335189,1286689],[335190,1286689],[335190,1286688],[335191,1286688],[335192,1286688],[335193,1286688],[335193,1286687],[335194,1286687],[335195,1286687],[335196,1286687],[335197,1286687],[335197,1286686],[335198,1286686],[335199,1286686],[335199,1286685],[335200,1286685],[335200,1286684],[335201,1286684],[335201,1286683],[335201,1286682],[335201,1286681],[335201,1286680],[335201,1286679],[335201,1286678],[335201,1286677],[335200,1286677],[335200,1286676],[335201,1286676],[335201,1286675],[335201,1286674],[335201,1286673],[335201,1286672],[335202,1286672]],\"segment\":{\"id\":623484,\"resource_state\":2,\"name\":\"Extended Presidio Sprint \",\"activity_type\":\"Ride\",\"distance\":2306.48,\"average_grade\":-0.5,\"maximum_grade\":2.9,\"elevation_high\":103.1,\"elevation_low\":89.2,\"start_latlng\":[37.7959567,-122.4777344],\"end_latlng\":[37.7902978,-122.4587329],\"start_latitude\":37.7959567,\"start_longitude\":-122.4777344,\"end_latitude\":37.7902978,\"end_longitude\":-122.4587329,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"u_ueFzlpjVTCx@[^YvBmDr@}@|@aALIj@Sp@s@Hy@Ei@]yA}AyCW_BL_CSiBw@}AW{B[sAaAkCV}B`@c@ZcAOeA]e@_@cAm@sCy@oAq@u@e@cBAw@JuAd@iAjAmA~B}Av@mBPyCnAiAj@Q~AmAnBgBn@y@n@cBFsA\\\\iC`@iAp@w@vDV|Bi@\"}},{\"segment_id\":627116,\"start_latlng\":[37.690280713140965,-122.39813706837595],\"end_latlng\":[37.7108667511493,-122.40110401064157],\"tile_steps\":[[335555,1285935],[335555,1285936],[335555,1285937],[335555,1285938],[335555,1285939],[335554,1285939],[335554,1285940],[335554,1285941],[335554,1285942],[335553,1285942],[335553,1285943],[335553,1285944],[335553,1285945],[335553,1285946],[335552,1285946],[335552,1285947],[335552,1285948],[335552,1285949],[335552,1285950],[335551,1285950],[335551,1285951],[335551,1285952],[335551,1285953],[335551,1285954],[335550,1285954],[335550,1285955],[335550,1285956],[335550,1285957],[335550,1285958],[335549,1285958],[335549,1285959],[335549,1285960],[335549,1285961],[335549,1285962],[335548,1285962],[335548,1285963],[335548,1285964],[335548,1285965],[335548,1285966],[335547,1285966],[335547,1285967],[335547,1285968],[335547,1285969],[335547,1285970],[335546,1285970],[335546,1285971],[335546,1285972],[335546,1285973],[335546,1285974],[335545,1285974],[335545,1285975],[335545,1285976],[335545,1285977],[335545,1285978],[335544,1285978],[335544,1285979],[335544,1285980],[335544,1285981],[335544,1285982],[335543,1285982],[335543,1285983],[335543,1285984],[335543,1285985],[335543,1285986],[335543,1285987],[335542,1285987],[335542,1285988],[335542,1285989],[335542,1285990],[335542,1285991],[335542,1285992],[335542,1285993],[335542,1285994],[335542,1285995],[335543,1285995],[335543,1285996],[335543,1285997],[335543,1285998],[335543,1285999],[335543,1286000],[335543,1286001],[335543,1286002],[335542,1286002],[335542,1286003],[335542,1286004],[335542,1286005],[335542,1286006],[335542,1286007],[335542,1286008],[335542,1286009],[335542,1286010],[335542,1286011],[335542,1286012],[335542,1286013],[335542,1286014],[335542,1286015],[335541,1286015],[335541,1286016],[335541,1286017],[335541,1286018],[335541,1286019],[335541,1286020],[335541,1286021],[335541,1286022],[335541,1286023],[335541,1286024],[335541,1286025],[335540,1286025],[335540,1286026],[335540,1286027],[335540,1286028],[335540,1286029],[335540,1286030],[335540,1286031],[335540,1286032],[335540,1286033],[335540,1286034],[335540,1286035],[335539,1286035],[335539,1286036],[335539,1286037],[335539,1286038],[335539,1286039],[335539,1286040],[335539,1286041],[335539,1286042],[335539,1286043],[335539,1286044],[335538,1286044],[335538,1286045],[335538,1286046],[335538,1286047],[335538,1286048],[335538,1286049],[335538,1286050],[335538,1286051],[335538,1286052],[335538,1286053],[335538,1286054],[335538,1286055],[335537,1286055],[335537,1286056],[335537,1286057],[335537,1286058],[335537,1286059],[335537,1286060],[335537,1286061],[335537,1286062],[335537,1286063],[335537,1286064],[335537,1286065],[335536,1286065],[335536,1286066],[335536,1286067],[335536,1286068],[335536,1286069],[335536,1286070],[335536,1286071],[335536,1286072],[335536,1286073],[335536,1286074],[335536,1286075],[335536,1286076],[335536,1286077],[335536,1286078],[335536,1286079],[335536,1286080],[335536,1286081],[335536,1286082],[335536,1286083],[335537,1286083],[335537,1286084],[335537,1286085],[335537,1286086],[335537,1286087]],\"segment\":{\"id\":627116,\"resource_state\":2,\"name\":\"Reverse Tunnel II\",\"activity_type\":\"Ride\",\"distance\":2330.07,\"average_grade\":0.1,\"maximum_grade\":4.9,\"elevation_high\":40.8,\"elevation_low\":34.0,\"start_latlng\":[37.690280713141,-122.398137068376],\"end_latlng\":[37.7108667511493,-122.401104010642],\"start_latitude\":37.690280713141,\"start_longitude\":-122.398137068376,\"end_latitude\":37.7108667511493,\"end_longitude\":-122.401104010642,\"climb_category\":0,\"city\":\"Brisbane\",\"state\":\"CA\",\"country\":null,\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"gk`eFj{`jVs@Ae@DwMzCgSfEsA\\\\sAVgADuIAaDF{b@pCiH^iDXaAFyA@wDAuBQwAY\"}},{\"segment_id\":630817,\"start_latlng\":[37.792973946779966,-122.46130535379052],\"end_latlng\":[37.790733464062214,-122.45892229489982],\"tile_steps\":[[335187,1286692],[335187,1286691],[335188,1286691],[335188,1286690],[335189,1286690],[335190,1286690],[335190,1286689],[335191,1286689],[335192,1286689],[335193,1286689],[335194,1286689],[335194,1286688],[335195,1286688],[335196,1286688],[335196,1286687],[335197,1286687],[335198,1286687],[335198,1286686],[335199,1286686],[335200,1286686],[335200,1286685],[335201,1286685],[335201,1286684],[335201,1286683],[335201,1286682],[335201,1286681],[335201,1286680],[335201,1286679],[335201,1286678],[335200,1286678],[335200,1286677],[335200,1286676],[335201,1286676],[335201,1286675]],\"segment\":{\"id\":630817,\"resource_state\":2,\"name\":\"Arguello Vista Point Sprint\",\"activity_type\":\"Ride\",\"distance\":376.49,\"average_grade\":-1.5,\"maximum_grade\":1.4,\"elevation_high\":85.0,\"elevation_low\":79.0,\"start_latlng\":[37.79297394678,-122.461305353791],\"end_latlng\":[37.7907334640622,-122.4589222949],\"start_latitude\":37.79297394678,\"start_longitude\":-122.461305353791,\"end_latitude\":37.7907334640622,\"end_longitude\":-122.4589222949,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"amteFdfmjVv@aBLw@JeBH_@dAuCZk@RKREXJ|@H~AD`@C\"}},{\"segment_id\":639933,\"start_latlng\":[37.79476004652679,-122.4635651987046],\"end_latlng\":[37.791637033224106,-122.45887267403305],\"tile_steps\":[[335174,1286705],[335175,1286705],[335175,1286704],[335176,1286704],[335177,1286704],[335178,1286704],[335178,1286703],[335179,1286703],[335180,1286703],[335180,1286702],[335180,1286701],[335181,1286701],[335181,1286700],[335181,1286699],[335181,1286698],[335182,1286698],[335182,1286697],[335183,1286697],[335183,1286696],[335183,1286695],[335184,1286695],[335184,1286694],[335185,1286694],[335185,1286693],[335185,1286692],[335186,1286692],[335186,1286691],[335187,1286691],[335187,1286690],[335188,1286690],[335188,1286689],[335189,1286689],[335190,1286689],[335190,1286688],[335191,1286688],[335192,1286688],[335193,1286688],[335194,1286688],[335194,1286687],[335195,1286687],[335196,1286687],[335197,1286687],[335197,1286686],[335198,1286686],[335199,1286686],[335199,1286685],[335200,1286685],[335200,1286684],[335200,1286683],[335201,1286683],[335201,1286682]],\"segment\":{\"id\":639933,\"resource_state\":2,\"name\":\"Short Presidio Sprint\",\"activity_type\":\"Ride\",\"distance\":585.316,\"average_grade\":-0.7,\"maximum_grade\":4.0,\"elevation_high\":94.6,\"elevation_low\":88.2,\"start_latlng\":[37.79476004652679,-122.4635651987046],\"end_latlng\":[37.791637033224106,-122.45887267403305],\"start_latitude\":37.79476004652679,\"start_longitude\":-122.4635651987046,\"end_latitude\":37.791637033224106,\"end_longitude\":-122.45887267403305,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"gxteFhtmjVXuCl@kApA[`BkA`BwA`AiAn@oBBcBXaBp@iBz@_@T@\"}},{\"segment_id\":711109,\"start_latlng\":[37.79279340058565,-122.46117384172976],\"end_latlng\":[37.790863048285246,-122.45892388746142],\"tile_steps\":[[335187,1286690],[335188,1286690],[335188,1286689],[335189,1286689],[335190,1286689],[335190,1286688],[335191,1286688],[335192,1286688],[335193,1286688],[335194,1286688],[335195,1286688],[335196,1286688],[335196,1286687],[335197,1286687],[335198,1286687],[335198,1286686],[335199,1286686],[335200,1286686],[335200,1286685],[335201,1286685],[335201,1286684],[335201,1286683],[335201,1286682],[335201,1286681],[335201,1286680],[335201,1286679],[335201,1286678],[335200,1286678],[335200,1286677],[335200,1286676],[335201,1286676]],\"segment\":{\"id\":711109,\"resource_state\":2,\"name\":\"Arguello Sprint (without running stop signs)\",\"activity_type\":\"Ride\",\"distance\":358.76,\"average_grade\":-1.9,\"maximum_grade\":-0.7,\"elevation_high\":94.2,\"elevation_low\":87.4,\"start_latlng\":[37.79279340058565,-122.46117384172976],\"end_latlng\":[37.790863048285246,-122.45892388746142],\"start_latitude\":37.79279340058565,\"start_longitude\":-122.46117384172976,\"end_latitude\":37.790863048285246,\"end_longitude\":-122.45892388746142,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"}kteFjemjVh@_AHYFy@Ca@@}@Nw@J[F[Zu@^q@TO\\\\@zAV`ABTC\"}},{\"segment_id\":877847,\"start_latlng\":[37.89805292151868,-122.53745603375137],\"end_latlng\":[37.89605752564967,-122.53566121682525],\"tile_steps\":[[334743,1287467],[334743,1287466],[334744,1287466],[334744,1287465],[334745,1287465],[334745,1287464],[334746,1287464],[334746,1287463],[334747,1287463],[334747,1287462],[334748,1287462],[334748,1287461],[334749,1287461],[334749,1287460],[334750,1287460],[334750,1287459],[334751,1287459],[334751,1287458],[334752,1287458],[334752,1287457],[334751,1287457],[334751,1287456],[334751,1287455],[334752,1287455],[334752,1287454],[334753,1287454],[334753,1287453],[334753,1287452],[334754,1287452]],\"segment\":{\"id\":877847,\"resource_state\":2,\"name\":\"Tam Bikes - Super Duper\",\"activity_type\":\"Ride\",\"distance\":303.16,\"average_grade\":0.0,\"maximum_grade\":0.0,\"elevation_high\":-77.4,\"elevation_low\":-77.4,\"start_latlng\":[37.89805292151868,-122.53745603375137],\"end_latlng\":[37.89605752564967,-122.53566121682525],\"start_latitude\":37.89805292151868,\"start_longitude\":-122.53745603375137,\"end_latitude\":37.89605752564967,\"end_longitude\":-122.53566121682525,\"climb_category\":0,\"city\":\"Mill Valley\",\"state\":\"CA\",\"country\":\"United States\",\"private\":true,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"y}hfFbb|jVTQh@s@r@s@x@iAJWh@}@X[\\\\d@RCn@m@n@c@\"}},{\"segment_id\":883551,\"start_latlng\":[37.90585110895336,-122.54809250123799],\"end_latlng\":[37.89781386964023,-122.53749165683985],\"tile_steps\":[[334681,1287524],[334682,1287524],[334682,1287523],[334683,1287523],[334683,1287522],[334684,1287522],[334684,1287521],[334684,1287520],[334685,1287520],[334685,1287519],[334685,1287518],[334686,1287518],[334686,1287517],[334686,1287516],[334687,1287516],[334687,1287515],[334688,1287515],[334688,1287514],[334689,1287514],[334689,1287513],[334690,1287513],[334690,1287512],[334691,1287512],[334691,1287511],[334692,1287511],[334692,1287510],[334693,1287510],[334694,1287510],[334694,1287509],[334695,1287509],[334696,1287509],[334696,1287508],[334697,1287508],[334698,1287508],[334698,1287507],[334699,1287507],[334700,1287507],[334700,1287506],[334701,1287506],[334702,1287506],[334703,1287506],[334703,1287505],[334704,1287505],[334705,1287505],[334706,1287505],[334707,1287505],[334708,1287505],[334708,1287504],[334709,1287504],[334709,1287503],[334710,1287503],[334710,1287502],[334711,1287502],[334711,1287501],[334711,1287500],[334712,1287500],[334712,1287499],[334712,1287498],[334713,1287498],[334713,1287497],[334714,1287497],[334714,1287496],[334715,1287496],[334715,1287495],[334716,1287495],[334716,1287494],[334716,1287493],[334717,1287493],[334717,1287492],[334718,1287492],[334718,1287491],[334719,1287491],[334719,1287490],[334720,1287490],[334720,1287489],[334721,1287489],[334721,1287488],[334722,1287488],[334722,1287487],[334723,1287487],[334723,1287486],[334724,1287486],[334724,1287485],[334725,1287485],[334725,1287484],[334726,1287484],[334726,1287483],[334726,1287482],[334727,1287482],[334727,1287481],[334728,1287481],[334728,1287480],[334729,1287480],[334729,1287479],[334730,1287479],[334730,1287478],[334731,1287478],[334731,1287477],[334732,1287477],[334732,1287476],[334733,1287476],[334733,1287475],[334733,1287474],[334734,1287474],[334734,1287473],[334735,1287473],[334735,1287472],[334736,1287472],[334736,1287471],[334737,1287471],[334737,1287470],[334738,1287470],[334738,1287469],[334739,1287469],[334739,1287468],[334740,1287468],[334740,1287467],[334741,1287467],[334741,1287466],[334742,1287466],[334742,1287465],[334743,1287465]],\"segment\":{\"id\":883551,\"resource_state\":2,\"name\":\"Depot -\\u003E Deuce\",\"activity_type\":\"Ride\",\"distance\":1321.47,\"average_grade\":-1.3,\"maximum_grade\":-0.3,\"elevation_high\":27.0,\"elevation_low\":10.0,\"start_latlng\":[37.90585110895336,-122.54809250123799],\"end_latlng\":[37.89781386964023,-122.53749165683985],\"start_latitude\":37.90585110895336,\"start_longitude\":-122.54809250123799,\"end_latitude\":37.89781386964023,\"end_longitude\":-122.53749165683985,\"climb_category\":0,\"city\":\"Mill Valley\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"qnjfFrd~jVj@k@Zc@dCaBj@i@tAsBb@g@Vi@V_ATqAn@iB^cBJcCZ{@X[rBwAzAyAbCyCp@u@x@eApGuHzA{A`B{Bp@oA`@k@VW\"}},{\"segment_id\":930715,\"start_latlng\":[37.90560216642916,-122.54763090983033],\"end_latlng\":[37.83492419868708,-122.48381009325385],\"tile_steps\":[[334684,1287522],[334684,1287521],[334684,1287520],[334685,1287520],[334685,1287519],[334686,1287519],[334686,1287518],[334686,1287517],[334687,1287517],[334687,1287516],[334687,1287515],[334688,1287515],[334688,1287514],[334689,1287514],[334690,1287514],[334690,1287513],[334691,1287513],[334691,1287512],[334692,1287512],[334692,1287511],[334693,1287511],[334694,1287511],[334694,1287510],[334695,1287510],[334695,1287509],[334696,1287509],[334697,1287509],[334698,1287509],[334698,1287508],[334699,1287508],[334700,1287508],[334700,1287507],[334701,1287507],[334701,1287506],[334702,1287506],[334703,1287506],[334704,1287506],[334704,1287505],[334705,1287505],[334706,1287505],[334707,1287505],[334707,1287504],[334708,1287504],[334709,1287504],[334709,1287503],[334710,1287503],[334710,1287502],[334711,1287502],[334711,1287501],[334711,1287500],[334712,1287500],[334712,1287499],[334713,1287499],[334713,1287498],[334713,1287497],[334714,1287497],[334714,1287496],[334715,1287496],[334715,1287495],[334716,1287495],[334716,1287494],[334717,1287494],[334717,1287493],[334718,1287493],[334718,1287492],[334719,1287492],[334719,1287491],[334720,1287491],[334720,1287490],[334721,1287490],[334721,1287489],[334721,1287488],[334722,1287488],[334722,1287487],[334723,1287487],[334723,1287486],[334724,1287486],[334724,1287485],[334725,1287485],[334725,1287484],[334726,1287484],[334726,1287483],[334727,1287483],[334727,1287482],[334728,1287482],[334728,1287481],[334729,1287481],[334729,1287480],[334729,1287479],[334730,1287479],[334730,1287478],[334731,1287478],[334731,1287477],[334732,1287477],[334732,1287476],[334733,1287476],[334733,1287475],[334734,1287475],[334734,1287474],[334735,1287474],[334735,1287473],[334735,1287472],[334736,1287472],[334736,1287471],[334737,1287471],[334737,1287470],[334738,1287470],[334738,1287469],[334739,1287469],[334739,1287468],[334740,1287468],[334740,1287467],[334741,1287467],[334741,1287466],[334742,1287466],[334742,1287465],[334743,1287465],[334743,1287464],[334744,1287464],[334744,1287463],[334745,1287463],[334745,1287462],[334746,1287462],[334746,1287461],[334747,1287461],[334747,1287460],[334748,1287460],[334748,1287459],[334749,1287459],[334749,1287458],[334750,1287458],[334750,1287457],[334750,1287456],[334751,1287456],[334751,1287455],[334752,1287455],[334752,1287454],[334753,1287454],[334753,1287453],[334753,1287452],[334754,1287452],[334754,1287451],[334755,1287451],[334755,1287450],[334756,1287450],[334756,1287449],[334757,1287449],[334757,1287448],[334758,1287448],[334758,1287447],[334759,1287447],[334759,1287446],[334760,1287446],[334760,1287445],[334761,1287445],[334762,1287445],[334762,1287444],[334763,1287444],[334763,1287443],[334764,1287443],[334765,1287443],[334765,1287442],[334766,1287442],[334766,1287441],[334767,1287441],[334767,1287440],[334768,1287440],[334768,1287439],[334769,1287439],[334769,1287438],[334770,1287438],[334771,1287438],[334771,1287437],[334772,1287437],[334772,1287436],[334773,1287436],[334773,1287435],[334774,1287435],[334774,1287434],[334775,1287434],[334775,1287433],[334776,1287433],[334777,1287433],[334777,1287432],[334778,1287432],[334778,1287431],[334779,1287431],[334779,1287430],[334780,1287430],[334781,1287430],[334781,1287429],[334782,1287429],[334783,1287429],[334783,1287428],[334784,1287428],[334785,1287428],[334785,1287427],[334785,1287428],[334785,1287427],[334786,1287427],[334787,1287427],[334788,1287427],[334788,1287426],[334789,1287426],[334790,1287426],[334790,1287425],[334791,1287425],[334791,1287424],[334792,1287424],[334793,1287424],[334793,1287423],[334794,1287423],[334794,1287422],[334795,1287422],[334796,1287422],[334796,1287421],[334797,1287421],[334797,1287420],[334798,1287420],[334799,1287420],[334799,1287419],[334800,1287419],[334800,1287418],[334801,1287418],[334802,1287418],[334802,1287417],[334803,1287417],[334803,1287416],[334804,1287416],[334804,1287415],[334805,1287415],[334806,1287415],[334806,1287414],[334807,1287414],[334807,1287413],[334808,1287413],[334809,1287413],[334809,1287412],[334810,1287412],[334810,1287411],[334811,1287411],[334811,1287410],[334812,1287410],[334812,1287409],[334812,1287408],[334813,1287408],[334813,1287407],[334813,1287406],[334813,1287405],[334813,1287404],[334814,1287404],[334814,1287403],[334814,1287402],[334814,1287401],[334814,1287400],[334814,1287399],[334814,1287398],[334814,1287397],[334814,1287396],[334815,1287396],[334815,1287395],[334815,1287394],[334815,1287393],[334815,1287392],[334815,1287391],[334816,1287391],[334816,1287390],[334816,1287389],[334816,1287388],[334817,1287388],[334818,1287388],[334819,1287388],[334819,1287387],[334820,1287387],[334820,1287386],[334820,1287385],[334820,1287384],[334821,1287384],[334821,1287383],[334822,1287383],[334822,1287382],[334822,1287381],[334823,1287381],[334823,1287380],[334824,1287380],[334824,1287379],[334825,1287379],[334825,1287378],[334826,1287378],[334826,1287377],[334827,1287377],[334827,1287376],[334828,1287376],[334828,1287375],[334829,1287375],[334829,1287374],[334830,1287374],[334830,1287373],[334831,1287373],[334831,1287372],[334832,1287372],[334832,1287371],[334833,1287371],[334833,1287370],[334834,1287370],[334834,1287369],[334835,1287369],[334836,1287369],[334836,1287368],[334837,1287368],[334837,1287367],[334838,1287367],[334838,1287366],[334839,1287366],[334839,1287365],[334840,1287365],[334840,1287364],[334841,1287364],[334841,1287363],[334842,1287363],[334842,1287362],[334843,1287362],[334843,1287361],[334844,1287361],[334844,1287360],[334845,1287360],[334845,1287359],[334846,1287359],[334846,1287358],[334847,1287358],[334847,1287357],[334848,1287357],[334848,1287356],[334849,1287356],[334849,1287355],[334850,1287355],[334850,1287354],[334851,1287354],[334851,1287353],[334852,1287353],[334852,1287352],[334853,1287352],[334853,1287351],[334854,1287351],[334854,1287350],[334855,1287350],[334855,1287349],[334856,1287349],[334856,1287348],[334857,1287348],[334857,1287347],[334858,1287347],[334858,1287346],[334859,1287346],[334859,1287345],[334860,1287345],[334860,1287344],[334861,1287344],[334861,1287343],[334862,1287343],[334862,1287342],[334863,1287342],[334863,1287341],[334864,1287341],[334864,1287340],[334865,1287340],[334865,1287339],[334866,1287339],[334866,1287338],[334866,1287337],[334867,1287337],[334867,1287336],[334868,1287336],[334869,1287336],[334869,1287335],[334870,1287335],[334870,1287334],[334871,1287334],[334871,1287333],[334872,1287333],[334872,1287332],[334873,1287332],[334873,1287331],[334874,1287331],[334874,1287330],[334875,1287330],[334875,1287329],[334876,1287329],[334876,1287328],[334877,1287328],[334878,1287328],[334878,1287327],[334879,1287327],[334879,1287326],[334880,1287326],[334880,1287325],[334881,1287325],[334881,1287324],[334882,1287324],[334882,1287323],[334883,1287323],[334883,1287322],[334884,1287322],[334884,1287321],[334885,1287321],[334885,1287320],[334886,1287320],[334886,1287319],[334887,1287319],[334887,1287318],[334888,1287318],[334888,1287317],[334889,1287317],[334889,1287316],[334890,1287316],[334890,1287315],[334891,1287315],[334891,1287314],[334892,1287314],[334892,1287313],[334893,1287313],[334893,1287312],[334894,1287312],[334894,1287311],[334895,1287311],[334895,1287310],[334896,1287310],[334896,1287309],[334897,1287309],[334897,1287308],[334898,1287308],[334898,1287307],[334899,1287307],[334899,1287306],[334900,1287306],[334900,1287305],[334901,1287305],[334901,1287304],[334902,1287304],[334902,1287303],[334903,1287303],[334903,1287302],[334904,1287302],[334904,1287301],[334905,1287301],[334905,1287300],[334906,1287300],[334906,1287299],[334907,1287299],[334907,1287298],[334908,1287298],[334908,1287297],[334909,1287297],[334909,1287296],[334910,1287296],[334910,1287295],[334911,1287295],[334911,1287294],[334912,1287294],[334912,1287293],[334913,1287293],[334914,1287293],[334914,1287292],[334915,1287292],[334915,1287291],[334916,1287291],[334916,1287290],[334917,1287290],[334917,1287289],[334918,1287289],[334918,1287288],[334919,1287288],[334919,1287287],[334920,1287287],[334920,1287286],[334921,1287286],[334921,1287285],[334922,1287285],[334922,1287284],[334923,1287284],[334923,1287283],[334924,1287283],[334924,1287282],[334925,1287282],[334926,1287282],[334926,1287281],[334927,1287281],[334928,1287281],[334928,1287280],[334929,1287280],[334929,1287279],[334929,1287278],[334929,1287277],[334930,1287277],[334930,1287276],[334931,1287276],[334931,1287275],[334932,1287275],[334932,1287274],[334933,1287274],[334933,1287273],[334934,1287273],[334934,1287272],[334935,1287272],[334935,1287271],[334936,1287271],[334936,1287270],[334936,1287269],[334937,1287269],[334937,1287268],[334938,1287268],[334938,1287267],[334938,1287266],[334939,1287266],[334939,1287265],[334939,1287264],[334939,1287263],[334940,1287263],[334940,1287262],[334940,1287261],[334940,1287260],[334941,1287260],[334941,1287259],[334941,1287258],[334941,1287257],[334942,1287257],[334942,1287256],[334942,1287255],[334942,1287254],[334943,1287254],[334943,1287253],[334943,1287252],[334944,1287252],[334944,1287251],[334944,1287250],[334945,1287250],[334945,1287249],[334946,1287249],[334946,1287248],[334946,1287247],[334947,1287247],[334947,1287246],[334948,1287246],[334948,1287245],[334949,1287245],[334949,1287244],[334950,1287244],[334950,1287243],[334950,1287242],[334951,1287242],[334951,1287241],[334952,1287241],[334952,1287240],[334953,1287240],[334953,1287239],[334954,1287239],[334954,1287238],[334954,1287237],[334955,1287237],[334955,1287236],[334956,1287236],[334956,1287235],[334957,1287235],[334957,1287234],[334958,1287234],[334958,1287233],[334959,1287233],[334959,1287232],[334960,1287232],[334960,1287231],[334960,1287230],[334961,1287230],[334961,1287229],[334962,1287229],[334962,1287228],[334963,1287228],[334963,1287227],[334963,1287226],[334964,1287226],[334964,1287225],[334965,1287225],[334965,1287224],[334966,1287224],[334966,1287223],[334967,1287223],[334967,1287222],[334968,1287222],[334968,1287221],[334968,1287220],[334969,1287220],[334969,1287219],[334970,1287219],[334970,1287218],[334971,1287218],[334971,1287217],[334972,1287217],[334972,1287216],[334972,1287215],[334973,1287215],[334973,1287214],[334974,1287214],[334974,1287213],[334975,1287213],[334975,1287212],[334976,1287212],[334977,1287212],[334977,1287211],[334978,1287211],[334978,1287210],[334979,1287210],[334980,1287210],[334980,1287209],[334981,1287209],[334981,1287208],[334982,1287208],[334983,1287208],[334983,1287207],[334984,1287207],[334984,1287206],[334985,1287206],[334985,1287205],[334986,1287205],[334987,1287205],[334987,1287204],[334988,1287204],[334988,1287203],[334989,1287203],[334990,1287203],[334990,1287202],[334991,1287202],[334991,1287201],[334992,1287201],[334993,1287201],[334993,1287200],[334994,1287200],[334995,1287200],[334996,1287200],[334997,1287200],[334997,1287199],[334998,1287199],[334999,1287199],[335000,1287199],[335001,1287199],[335002,1287199],[335003,1287199],[335004,1287199],[335005,1287199],[335006,1287199],[335007,1287199],[335008,1287199],[335009,1287199],[335010,1287199],[335011,1287199],[335012,1287199],[335012,1287198],[335013,1287198],[335014,1287198],[335015,1287198],[335016,1287198],[335016,1287197],[335017,1287197],[335018,1287197],[335019,1287197],[335019,1287196],[335020,1287196],[335021,1287196],[335021,1287195],[335022,1287195],[335023,1287195],[335023,1287194],[335024,1287194],[335025,1287194],[335025,1287193],[335026,1287193],[335026,1287192],[335027,1287192],[335028,1287192],[335028,1287191],[335029,1287191],[335030,1287191],[335030,1287190],[335031,1287190],[335031,1287189],[335032,1287189],[335033,1287189],[335033,1287188],[335034,1287188],[335035,1287188],[335035,1287187],[335036,1287187],[335037,1287187],[335037,1287186],[335038,1287186],[335038,1287185],[335039,1287185],[335040,1287185],[335040,1287184],[335041,1287184],[335042,1287184],[335042,1287183],[335043,1287183],[335044,1287183],[335044,1287182],[335045,1287182],[335045,1287181],[335046,1287181],[335047,1287181],[335047,1287180],[335048,1287180],[335049,1287180],[335049,1287179],[335050,1287179],[335050,1287178],[335051,1287178],[335052,1287178],[335052,1287177],[335053,1287177],[335054,1287177],[335054,1287176],[335055,1287176],[335056,1287176],[335057,1287176],[335057,1287175],[335058,1287175],[335059,1287175],[335059,1287174],[335060,1287174],[335061,1287174],[335062,1287174],[335062,1287173],[335063,1287173],[335064,1287173],[335064,1287172],[335065,1287172],[335065,1287171],[335066,1287171],[335067,1287171],[335067,1287170],[335068,1287170],[335068,1287169],[335069,1287169],[335069,1287168],[335070,1287168],[335070,1287167],[335071,1287167],[335071,1287166],[335072,1287166],[335072,1287165],[335073,1287165],[335074,1287165],[335074,1287164],[335075,1287164],[335075,1287163],[335076,1287163],[335076,1287162],[335077,1287162],[335077,1287161],[335078,1287161],[335078,1287160],[335079,1287160],[335079,1287159],[335079,1287158],[335080,1287158],[335080,1287157],[335081,1287157],[335081,1287156],[335081,1287155],[335082,1287155],[335082,1287154],[335082,1287153],[335083,1287153],[335083,1287152],[335083,1287151],[335083,1287150],[335084,1287150],[335084,1287149],[335084,1287148],[335085,1287148],[335085,1287147],[335085,1287146],[335085,1287145],[335085,1287144],[335085,1287143],[335085,1287142],[335085,1287141],[335085,1287140],[335085,1287139],[335085,1287138],[335085,1287137],[335085,1287136],[335085,1287135],[335085,1287134],[335084,1287134],[335084,1287133],[335084,1287132],[335084,1287131],[335084,1287130],[335084,1287129],[335084,1287128],[335084,1287127],[335084,1287126],[335084,1287125],[335084,1287124],[335084,1287123],[335084,1287122],[335084,1287121],[335083,1287121],[335083,1287120],[335083,1287119],[335082,1287119],[335082,1287118],[335082,1287117],[335081,1287117],[335081,1287116],[335080,1287116],[335080,1287115],[335080,1287114],[335080,1287113],[335079,1287113],[335079,1287112],[335078,1287112],[335078,1287111],[335077,1287111],[335076,1287111],[335075,1287111],[335074,1287111],[335074,1287110],[335073,1287110],[335073,1287109],[335073,1287108],[335074,1287108],[335074,1287107],[335074,1287106],[335074,1287105],[335074,1287104],[335074,1287103],[335074,1287102],[335074,1287101],[335074,1287100],[335074,1287099],[335073,1287099],[335073,1287098],[335073,1287097],[335073,1287096],[335073,1287095],[335073,1287094],[335073,1287093],[335073,1287092],[335073,1287091],[335073,1287090],[335074,1287090],[335075,1287090],[335076,1287090],[335077,1287090],[335078,1287090],[335079,1287090],[335080,1287090],[335081,1287090],[335082,1287090],[335082,1287089],[335083,1287089],[335084,1287089],[335085,1287089],[335085,1287088],[335086,1287088],[335086,1287087],[335087,1287087],[335087,1287086],[335088,1287086],[335088,1287085],[335088,1287084],[335088,1287083],[335089,1287083],[335089,1287082],[335089,1287081],[335089,1287080],[335090,1287080],[335090,1287079],[335090,1287078],[335090,1287077],[335090,1287076],[335090,1287075],[335090,1287074],[335090,1287073],[335090,1287072],[335090,1287071],[335090,1287070],[335089,1287070],[335089,1287069],[335089,1287068],[335089,1287067],[335089,1287066],[335088,1287066],[335088,1287065],[335088,1287064],[335088,1287063],[335088,1287062],[335088,1287061],[335088,1287060],[335088,1287059],[335088,1287058],[335089,1287058],[335089,1287057],[335089,1287056],[335090,1287056],[335090,1287055],[335090,1287054],[335091,1287054],[335091,1287053],[335091,1287052],[335092,1287052],[335092,1287051],[335092,1287050],[335092,1287049],[335092,1287048],[335092,1287047],[335092,1287046],[335092,1287045],[335092,1287044],[335092,1287043],[335091,1287043],[335091,1287042],[335091,1287041],[335090,1287041],[335090,1287040],[335089,1287040],[335089,1287039],[335088,1287039],[335087,1287039],[335087,1287038],[335086,1287038],[335085,1287038],[335085,1287037],[335084,1287037],[335083,1287037],[335082,1287037],[335081,1287037],[335080,1287037],[335079,1287037],[335078,1287037],[335078,1287038],[335077,1287038],[335076,1287038],[335075,1287038],[335074,1287038],[335073,1287038],[335072,1287038],[335071,1287038],[335070,1287038],[335069,1287038],[335068,1287038],[335067,1287038],[335067,1287037],[335066,1287037],[335065,1287037],[335065,1287036],[335064,1287036],[335064,1287035],[335063,1287035],[335063,1287034],[335062,1287034],[335062,1287033],[335062,1287032],[335061,1287032],[335061,1287031],[335061,1287030],[335060,1287030],[335060,1287029],[335060,1287028],[335060,1287027],[335060,1287026],[335060,1287025],[335060,1287024],[335060,1287023],[335060,1287022],[335060,1287021],[335060,1287020],[335060,1287019],[335060,1287018],[335060,1287017],[335060,1287016],[335060,1287015],[335060,1287014],[335059,1287014],[335059,1287013],[335060,1287013],[335060,1287012],[335059,1287012],[335059,1287011],[335058,1287011],[335058,1287010],[335057,1287010],[335057,1287009],[335057,1287008],[335056,1287008],[335056,1287007],[335056,1287006],[335056,1287005],[335055,1287005],[335055,1287004],[335055,1287003],[335055,1287002],[335056,1287002],[335056,1287001]],\"segment\":{\"id\":930715,\"resource_state\":2,\"name\":\"Mill Valley Depot to North end of Golden Gate Bridge\",\"activity_type\":\"Ride\",\"distance\":11449.4,\"average_grade\":0.6,\"maximum_grade\":22.9,\"elevation_high\":2.0,\"elevation_low\":-87.4,\"start_latlng\":[37.90560216642916,-122.54763090983033],\"end_latlng\":[37.83492419868708,-122.48381009325385],\"start_latitude\":37.90560216642916,\"start_longitude\":-122.54763090983033,\"end_latitude\":37.83492419868708,\"end_longitude\":-122.48381009325385,\"climb_category\":0,\"city\":\"Mill Valley\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"_mjfFva~jVPBf@Wz@q@r@c@VUf@s@rBgER{@^oBd@_AFQb@}CJe@N_@T[vBiBvAsAvBsCjEcF^g@xC_DjCaDx@y@^e@h@aA^c@jA_B^_@x@oAf@g@d@YhF{Fz@}Ah@wArAmC|CyEtAsCn@yAhAuDPuALm@hBwDfAeCxEeKv@w@r@_@`BU|Fi@zCs@Te@Aq@TUb@I~@m@|@y@x@eAnFyH|DqF|@uAvHqKpAoBhA}ApCeD`@_@j@iAlAsBv@k@JUJ]b@}@dKqNrWg_@Va@b@aAl@_Bf@aARJ^M\\\\s@bAuAz@y@hA_Av@g@`@SLQ?GNBb@IfA_@fD_AdAm@x@m@fAaA|DcEj@i@bEuE`@[bB_BbAoAzByB`@e@x@y@hAaB`@s@bAyBjAsCd@}@`BwDZiAF]R_FBwGHqBLgAV_B\\\\yALc@tBsF~A{EVm@|AsEvCaIJo@f@_B`AkFd@iAl@cAx@mAdAmB|@kBd@s@lAaAjBqA`D{Ar@Q~ABbD?zFLxBA|@\\\\rAj@tAdApAd@Xt@Er@@x@@FRP`@?`AGj@AfA?jBFXDtAAP@bABLBHINc@@KAU?q@Gg@?aAJgA@_@Fi@LWPONUb@]GIRWxA]b@Q`AUdBSz@F`AVjB`@p@RrBLz@]d@]z@[NIh@e@lB]r@Bx@JPJl@`@b@RHH`AnDFn@AnAQpEGfC@`@LrATz@Vj@bAhAp@b@d@T\\\\L`@Fb@Bv@?|@Ep@IN?rBHt@XVMJHXZl@d@jB|@z@D|@E\"}},";
    String d2 = "{\"segment_id\":1397684,\"start_latlng\":[37.79750629328191,-122.47670299373567],\"end_latlng\":[37.78962587937713,-122.45954121463001],\"tile_steps\":[[335097,1286725],[335097,1286724],[335097,1286723],[335096,1286723],[335096,1286722],[335096,1286721],[335095,1286721],[335095,1286720],[335095,1286719],[335094,1286719],[335094,1286718],[335093,1286718],[335093,1286717],[335092,1286717],[335092,1286716],[335091,1286716],[335091,1286715],[335091,1286714],[335091,1286713],[335091,1286712],[335091,1286711],[335091,1286710],[335092,1286710],[335092,1286709],[335093,1286709],[335093,1286708],[335094,1286708],[335094,1286707],[335095,1286707],[335095,1286706],[335096,1286706],[335097,1286706],[335097,1286705],[335098,1286705],[335098,1286704],[335099,1286704],[335099,1286703],[335100,1286703],[335100,1286702],[335100,1286701],[335101,1286701],[335101,1286700],[335101,1286699],[335102,1286699],[335102,1286698],[335103,1286698],[335103,1286697],[335104,1286697],[335105,1286697],[335106,1286697],[335107,1286697],[335108,1286697],[335109,1286697],[335109,1286698],[335110,1286698],[335110,1286699],[335111,1286699],[335112,1286699],[335112,1286700],[335113,1286700],[335113,1286701],[335114,1286701],[335115,1286701],[335115,1286702],[335116,1286702],[335117,1286702],[335118,1286702],[335119,1286702],[335119,1286701],[335120,1286701],[335121,1286701],[335122,1286701],[335122,1286702],[335123,1286702],[335124,1286702],[335124,1286703],[335125,1286703],[335126,1286703],[335126,1286704],[335127,1286704],[335128,1286704],[335129,1286704],[335130,1286704],[335130,1286705],[335131,1286705],[335132,1286705],[335133,1286705],[335133,1286706],[335134,1286706],[335134,1286707],[335135,1286707],[335136,1286707],[335136,1286708],[335137,1286708],[335138,1286708],[335139,1286708],[335139,1286707],[335140,1286707],[335141,1286707],[335141,1286706],[335142,1286706],[335142,1286705],[335143,1286705],[335144,1286705],[335145,1286705],[335145,1286706],[335146,1286706],[335146,1286707],[335147,1286707],[335147,1286708],[335148,1286708],[335149,1286708],[335149,1286709],[335150,1286709],[335151,1286709],[335152,1286709],[335152,1286710],[335153,1286710],[335154,1286710],[335154,1286711],[335155,1286711],[335155,1286712],[335155,1286713],[335156,1286713],[335156,1286714],[335157,1286714],[335158,1286714],[335158,1286715],[335159,1286715],[335160,1286715],[335161,1286715],[335162,1286715],[335163,1286715],[335164,1286715],[335164,1286714],[335165,1286714],[335166,1286714],[335166,1286713],[335166,1286712],[335167,1286712],[335167,1286711],[335168,1286711],[335168,1286710],[335168,1286709],[335169,1286709],[335169,1286708],[335170,1286708],[335170,1286707],[335170,1286706],[335171,1286706],[335171,1286705],[335172,1286705],[335173,1286705],[335174,1286705],[335174,1286704],[335175,1286704],[335176,1286704],[335177,1286704],[335178,1286704],[335178,1286703],[335179,1286703],[335179,1286702],[335180,1286702],[335180,1286701],[335180,1286700],[335180,1286699],[335181,1286699],[335181,1286698],[335181,1286697],[335182,1286697],[335182,1286696],[335183,1286696],[335183,1286695],[335184,1286695],[335184,1286694],[335184,1286693],[335185,1286693],[335185,1286692],[335186,1286692],[335186,1286691],[335186,1286690],[335187,1286690],[335187,1286689],[335188,1286689],[335188,1286688],[335189,1286688],[335190,1286688],[335190,1286687],[335191,1286687],[335192,1286687],[335193,1286687],[335194,1286687],[335195,1286687],[335196,1286687],[335197,1286687],[335197,1286686],[335198,1286686],[335198,1286685],[335199,1286685],[335200,1286685],[335200,1286684],[335201,1286684],[335201,1286683],[335201,1286682],[335201,1286681],[335201,1286680],[335200,1286680],[335200,1286679],[335200,1286678],[335200,1286677],[335200,1286676],[335201,1286676],[335201,1286675],[335201,1286674],[335201,1286673],[335202,1286673],[335202,1286672],[335202,1286671],[335202,1286670],[335201,1286670],[335201,1286669],[335200,1286669],[335199,1286669],[335199,1286668],[335198,1286668],[335197,1286668],[335197,1286667]],\"segment\":{\"id\":1397684,\"resource_state\":2,\"name\":\"Back across the top of the Presidio\",\"activity_type\":\"Ride\",\"distance\":2627.01,\"average_grade\":-0.2,\"maximum_grade\":3.0,\"elevation_high\":93.4,\"elevation_low\":78.8,\"start_latlng\":[37.79750629328191,-122.47670299373567],\"end_latlng\":[37.78962587937713,-122.45954121463001],\"start_latitude\":37.79750629328191,\"start_longitude\":-122.47670299373567,\"end_latitude\":37.78962587937713,\"end_longitude\":-122.45954121463001,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"kiueFlfpjVPAlAf@t@l@z@dAz@n@RJR@R?h@IPI^YNOV[x@mBb@o@RSX]fA}@LC^Sd@eAHw@KiAKa@w@oBi@iAMi@Cq@FgA@_BSeAk@wAGYE[CsASiAy@_BE[C]Bu@Js@d@o@TkAW}@k@i@Sc@UeBQy@]s@kAoAc@kAIeA?WL_B^y@`Aw@bBoAt@{@Lk@VsBDo@Jk@^_@XEzAg@p@c@d@q@nAaArAaBb@}A@iBFgARk@Vi@d@w@NKd@GjATn@@zAYfAe@d@NPb@X|Ab@\\\\\"}},{\"segment_id\":1790219,\"start_latlng\":[37.79756270349026,-122.47672528959811],\"end_latlng\":[37.789894100278616,-122.45930668897927],\"tile_steps\":[[335097,1286725],[335097,1286724],[335097,1286723],[335096,1286723],[335096,1286722],[335096,1286721],[335095,1286721],[335095,1286720],[335094,1286720],[335094,1286719],[335094,1286718],[335093,1286718],[335093,1286717],[335092,1286717],[335092,1286716],[335091,1286716],[335091,1286715],[335091,1286714],[335091,1286713],[335091,1286712],[335091,1286711],[335092,1286711],[335092,1286710],[335092,1286709],[335093,1286709],[335093,1286708],[335094,1286708],[335095,1286708],[335095,1286707],[335096,1286707],[335096,1286706],[335097,1286706],[335098,1286706],[335098,1286705],[335099,1286705],[335099,1286704],[335100,1286704],[335100,1286703],[335101,1286703],[335101,1286702],[335102,1286702],[335102,1286701],[335102,1286700],[335103,1286700],[335103,1286699],[335103,1286698],[335104,1286698],[335105,1286698],[335106,1286698],[335107,1286698],[335108,1286698],[335109,1286698],[335109,1286699],[335110,1286699],[335111,1286699],[335111,1286700],[335112,1286700],[335113,1286700],[335113,1286701],[335114,1286701],[335114,1286702],[335115,1286702],[335116,1286702],[335117,1286702],[335118,1286702],[335119,1286702],[335120,1286702],[335121,1286702],[335122,1286702],[335123,1286702],[335123,1286703],[335124,1286703],[335125,1286703],[335125,1286704],[335126,1286704],[335126,1286705],[335127,1286705],[335128,1286705],[335129,1286705],[335130,1286705],[335130,1286706],[335131,1286706],[335132,1286706],[335132,1286707],[335133,1286707],[335134,1286707],[335134,1286708],[335135,1286708],[335136,1286708],[335136,1286709],[335137,1286709],[335138,1286709],[335138,1286708],[335139,1286708],[335140,1286708],[335140,1286707],[335140,1286706],[335141,1286706],[335142,1286706],[335142,1286705],[335143,1286705],[335144,1286705],[335144,1286706],[335145,1286706],[335146,1286706],[335146,1286707],[335146,1286708],[335147,1286708],[335148,1286708],[335148,1286709],[335149,1286709],[335150,1286709],[335151,1286709],[335151,1286710],[335152,1286710],[335153,1286710],[335153,1286711],[335154,1286711],[335154,1286712],[335155,1286712],[335155,1286713],[335156,1286713],[335156,1286714],[335156,1286715],[335157,1286715],[335158,1286715],[335158,1286716],[335159,1286716],[335160,1286716],[335161,1286716],[335162,1286716],[335163,1286716],[335163,1286715],[335164,1286715],[335165,1286715],[335165,1286714],[335166,1286714],[335166,1286713],[335167,1286713],[335167,1286712],[335167,1286711],[335168,1286711],[335168,1286710],[335169,1286710],[335169,1286709],[335169,1286708],[335170,1286708],[335170,1286707],[335170,1286706],[335171,1286706],[335171,1286705],[335172,1286705],[335173,1286705],[335174,1286705],[335175,1286705],[335175,1286704],[335176,1286704],[335177,1286704],[335178,1286704],[335178,1286703],[335179,1286703],[335179,1286702],[335180,1286702],[335180,1286701],[335180,1286700],[335180,1286699],[335181,1286699],[335181,1286698],[335181,1286697],[335182,1286697],[335182,1286696],[335183,1286696],[335183,1286695],[335184,1286695],[335184,1286694],[335184,1286693],[335185,1286693],[335185,1286692],[335186,1286692],[335186,1286691],[335187,1286691],[335187,1286690],[335188,1286690],[335188,1286689],[335189,1286689],[335189,1286688],[335190,1286688],[335191,1286688],[335192,1286688],[335193,1286688],[335194,1286688],[335195,1286688],[335195,1286687],[335196,1286687],[335197,1286687],[335197,1286686],[335198,1286686],[335198,1286685],[335199,1286685],[335200,1286685],[335200,1286684],[335201,1286684],[335201,1286683],[335201,1286682],[335201,1286681],[335201,1286680],[335200,1286680],[335200,1286679],[335200,1286678],[335200,1286677],[335200,1286676],[335200,1286675],[335201,1286675],[335201,1286674],[335201,1286673],[335202,1286673],[335202,1286672],[335202,1286671],[335202,1286670],[335201,1286670],[335200,1286670],[335200,1286669],[335199,1286669],[335198,1286669]],\"segment\":{\"id\":1790219,\"resource_state\":2,\"name\":\"Double fox jump (Hunter to PGC)\",\"activity_type\":\"Ride\",\"distance\":2608.7,\"average_grade\":-0.3,\"maximum_grade\":3.1,\"elevation_high\":84.6,\"elevation_low\":68.2,\"start_latlng\":[37.79756270349026,-122.47672528959811],\"end_latlng\":[37.789894100278616,-122.45930668897927],\"start_latitude\":37.79756270349026,\"start_longitude\":-122.47672528959811,\"end_latitude\":37.789894100278616,\"end_longitude\":-122.45930668897927,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"wiueFpfpjV|@Lb@LjA~@fApA^XVHH@`@ERIr@a@Z[Xc@p@uA^aApAkBLIx@YJKN[LiACc@S}Ag@qAi@iAMi@Ao@JaBBo@Io@IWk@aAWm@Kw@EsAEWw@gBQs@C]@]D[LYl@w@Tc@DS?UAWGUKUy@cAMi@YoBQe@y@iAw@u@Uc@Kk@AgABgAJk@HS\\\\a@`BsArAy@Z]Ne@TuBPeAFUTc@NKPGx@Qr@a@LKp@}@tAkArAcBRe@Ji@DqCl@mBb@y@LSNMPGR@v@PN@rA@`@ElAe@ZAXHDJHv@Nd@\"}},{\"segment_id\":2856791,\"start_latlng\":[37.7835520170629,-122.44603998027742],\"end_latlng\":[37.7843189612031,-122.4396529700607],\"tile_steps\":[[335276,1286622],[335277,1286622],[335278,1286622],[335279,1286622],[335280,1286622],[335280,1286623],[335281,1286623],[335282,1286623],[335283,1286623],[335284,1286623],[335285,1286623],[335286,1286623],[335286,1286624],[335287,1286624],[335288,1286624],[335289,1286624],[335290,1286624],[335291,1286624],[335292,1286624],[335292,1286625],[335293,1286625],[335294,1286625],[335295,1286625],[335296,1286625],[335297,1286625],[335298,1286625],[335299,1286625],[335299,1286626],[335300,1286626],[335301,1286626],[335302,1286626],[335303,1286626],[335304,1286626],[335305,1286626],[335305,1286627],[335306,1286627],[335307,1286627],[335308,1286627],[335309,1286627],[335310,1286627],[335311,1286627],[335311,1286628],[335312,1286628],[335313,1286628]],\"segment\":{\"id\":2856791,\"resource_state\":2,\"name\":\"Post downhill\",\"activity_type\":\"Ride\",\"distance\":571.825,\"average_grade\":-6.2,\"maximum_grade\":-1.4,\"elevation_high\":78.6,\"elevation_low\":43.3,\"start_latlng\":[37.783552,-122.44604],\"end_latlng\":[37.784319,-122.439653],\"start_latitude\":37.783552,\"start_longitude\":-122.44604,\"end_latitude\":37.784319,\"end_longitude\":-122.439653,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":3,\"points\":\"erreFvfjjVD?Cm@yCme@\"}},{\"segment_id\":3242098,\"start_latlng\":[37.764080772176385,-122.3878901079297],\"end_latlng\":[37.75050602853298,-122.38661061041057],\"tile_steps\":[[335614,1286479],[335614,1286478],[335614,1286477],[335614,1286476],[335615,1286476],[335615,1286475],[335615,1286474],[335615,1286473],[335615,1286472],[335615,1286471],[335615,1286470],[335615,1286469],[335615,1286468],[335615,1286467],[335615,1286466],[335615,1286465],[335615,1286464],[335615,1286463],[335615,1286462],[335616,1286462],[335616,1286461],[335616,1286460],[335616,1286459],[335616,1286458],[335616,1286457],[335616,1286456],[335616,1286455],[335616,1286454],[335616,1286453],[335616,1286452],[335616,1286451],[335616,1286450],[335617,1286450],[335617,1286449],[335617,1286448],[335617,1286447],[335617,1286446],[335617,1286445],[335617,1286444],[335617,1286443],[335617,1286442],[335617,1286441],[335617,1286440],[335617,1286439],[335617,1286438],[335617,1286437],[335617,1286436],[335617,1286435],[335618,1286435],[335618,1286434],[335617,1286434],[335617,1286433],[335617,1286432],[335618,1286432],[335618,1286431],[335618,1286430],[335618,1286429],[335618,1286428],[335618,1286427],[335618,1286426],[335618,1286425],[335618,1286424],[335618,1286423],[335618,1286422],[335619,1286422],[335619,1286421],[335619,1286420],[335619,1286419],[335619,1286418],[335619,1286417],[335619,1286416],[335619,1286415],[335619,1286414],[335619,1286413],[335619,1286412],[335619,1286411],[335619,1286410],[335619,1286409],[335620,1286409],[335620,1286408],[335620,1286407],[335620,1286406],[335620,1286405],[335620,1286404],[335620,1286403],[335620,1286402],[335620,1286401],[335620,1286400],[335620,1286399],[335620,1286398],[335620,1286397],[335621,1286397],[335621,1286396],[335621,1286395],[335621,1286394],[335621,1286393],[335621,1286392],[335621,1286391],[335621,1286390],[335621,1286389],[335621,1286388],[335621,1286387],[335621,1286386],[335621,1286385],[335621,1286384],[335621,1286383],[335622,1286383],[335622,1286382],[335622,1286381],[335622,1286380],[335622,1286379]],\"segment\":{\"id\":3242098,\"resource_state\":2,\"name\":\"Cesar to Mariposa\",\"activity_type\":\"Ride\",\"distance\":1516.07,\"average_grade\":0.1,\"maximum_grade\":7.3,\"elevation_high\":12.4,\"elevation_low\":3.7,\"start_latlng\":[37.76408075942519,-122.38789012691996],\"end_latlng\":[37.750506031287,-122.38661058765501],\"start_latitude\":37.76408075942519,\"start_longitude\":-122.38789012691996,\"end_latitude\":37.750506031287,\"end_longitude\":-122.38661058765501,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"oxneFj{~iVbMg@jH_@bMe@h@Db@Mz\\\\}A|Mk@\"}},{\"segment_id\":3335589,\"start_latlng\":[37.7758726850152,-122.39395617507398],\"end_latlng\":[37.76672249659896,-122.39067683927715],\"tile_steps\":[[335579,1286566],[335579,1286565],[335580,1286565],[335580,1286564],[335581,1286564],[335582,1286564],[335582,1286563],[335583,1286563],[335584,1286563],[335584,1286562],[335585,1286562],[335585,1286561],[335586,1286561],[335586,1286560],[335587,1286560],[335587,1286559],[335588,1286559],[335588,1286558],[335589,1286558],[335589,1286557],[335590,1286557],[335590,1286556],[335591,1286556],[335591,1286555],[335592,1286555],[335592,1286554],[335592,1286553],[335593,1286553],[335593,1286552],[335593,1286551],[335593,1286550],[335593,1286549],[335593,1286548],[335593,1286547],[335594,1286547],[335594,1286546],[335594,1286545],[335594,1286544],[335594,1286543],[335594,1286542],[335594,1286541],[335594,1286540],[335594,1286539],[335594,1286538],[335594,1286537],[335594,1286536],[335594,1286535],[335595,1286535],[335595,1286534],[335595,1286533],[335595,1286532],[335595,1286531],[335595,1286530],[335595,1286529],[335595,1286528],[335595,1286527],[335595,1286526],[335595,1286525],[335595,1286524],[335595,1286523],[335595,1286522],[335595,1286521],[335595,1286520],[335596,1286520],[335596,1286519],[335596,1286518],[335596,1286517],[335596,1286516],[335596,1286515],[335596,1286514],[335596,1286513],[335596,1286512],[335596,1286511],[335596,1286510],[335596,1286509],[335596,1286508],[335596,1286507],[335596,1286506],[335596,1286505],[335597,1286505],[335597,1286504],[335597,1286503],[335597,1286502],[335597,1286501],[335597,1286500],[335598,1286500],[335598,1286499],[335598,1286498]],\"segment\":{\"id\":3335589,\"resource_state\":2,\"name\":\"King to 16th on 4th\",\"activity_type\":\"Ride\",\"distance\":1116.21,\"average_grade\":0.0,\"maximum_grade\":1.8,\"elevation_high\":-54.4,\"elevation_low\":-56.8,\"start_latlng\":[37.7758726850152,-122.39395617507398],\"end_latlng\":[37.76672249659896,-122.39067683927715],\"start_latitude\":37.7758726850152,\"start_longitude\":-122.39395617507398,\"end_latitude\":37.76672249659896,\"end_longitude\":-122.39067683927715,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"ebqeFfa`jVdAeCz@}AZg@z@mApAwA^UzA]hAKbKe@hFO~AKpCGd@@jBSrEOlBq@\"}},{\"segment_id\":3419050,\"start_latlng\":[37.763984967023134,-122.38789396360517],\"end_latlng\":[37.75331497192383,-122.38686399534345],\"tile_steps\":[[335614,1286478],[335614,1286477],[335614,1286476],[335614,1286475],[335615,1286475],[335615,1286474],[335615,1286473],[335615,1286472],[335615,1286471],[335615,1286470],[335615,1286469],[335615,1286468],[335615,1286467],[335615,1286466],[335615,1286465],[335615,1286464],[335615,1286463],[335615,1286462],[335616,1286462],[335616,1286461],[335616,1286460],[335616,1286459],[335616,1286458],[335616,1286457],[335616,1286456],[335616,1286455],[335616,1286454],[335616,1286453],[335616,1286452],[335616,1286451],[335616,1286450],[335616,1286449],[335616,1286448],[335616,1286447],[335616,1286446],[335617,1286446],[335617,1286445],[335617,1286444],[335617,1286443],[335617,1286442],[335617,1286441],[335617,1286440],[335617,1286439],[335617,1286438],[335617,1286437],[335617,1286436],[335617,1286435],[335617,1286434],[335617,1286433],[335618,1286433],[335618,1286432],[335618,1286431],[335618,1286430],[335618,1286429],[335618,1286428],[335618,1286427],[335618,1286426],[335618,1286425],[335618,1286424],[335618,1286423],[335618,1286422],[335618,1286421],[335618,1286420],[335619,1286420],[335619,1286419],[335619,1286418],[335619,1286417],[335619,1286416],[335619,1286415],[335619,1286414],[335619,1286413],[335619,1286412],[335619,1286411],[335619,1286410],[335619,1286409],[335620,1286409],[335620,1286408],[335620,1286407],[335620,1286406],[335620,1286405],[335620,1286404],[335620,1286403],[335620,1286402],[335620,1286401],[335620,1286400],[335620,1286399]],\"segment\":{\"id\":3419050,\"resource_state\":2,\"name\":\"Illinois - Mariposa to 25th\",\"activity_type\":\"Ride\",\"distance\":1188.02,\"average_grade\":0.5,\"maximum_grade\":2.8,\"elevation_high\":-43.3,\"elevation_low\":-53.7,\"start_latlng\":[37.763985,-122.387894],\"end_latlng\":[37.753315,-122.386864],\"start_latitude\":37.763985,\"start_longitude\":-122.387894,\"end_latitude\":37.753315,\"end_longitude\":-122.386864,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"{wneFj{~iVvAEhMm@xCEtMe@xAQzGYxCUrLk@\"}},{\"segment_id\":4371584,\"start_latlng\":[37.68598297610879,-122.39795903675258],\"end_latlng\":[37.77643896639347,-122.38980897702277],\"tile_steps\":[[335556,1285903],[335556,1285904],[335555,1285904],[335555,1285905],[335554,1285905],[335554,1285906],[335553,1285906],[335553,1285907],[335552,1285907],[335552,1285908],[335551,1285908],[335551,1285909],[335550,1285909],[335550,1285910],[335549,1285910],[335549,1285911],[335549,1285912],[335549,1285913],[335549,1285914],[335549,1285915],[335549,1285916],[335549,1285917],[335549,1285918],[335550,1285918],[335550,1285919],[335550,1285920],[335551,1285920],[335551,1285921],[335552,1285921],[335552,1285922],[335552,1285923],[335552,1285924],[335553,1285924],[335553,1285925],[335553,1285926],[335553,1285927],[335553,1285928],[335554,1285928],[335554,1285929],[335554,1285930],[335554,1285931],[335554,1285932],[335555,1285932],[335555,1285933],[335555,1285934],[335555,1285935],[335555,1285936],[335555,1285937],[335555,1285938],[335554,1285938],[335554,1285939],[335554,1285940],[335554,1285941],[335554,1285942],[335554,1285943],[335553,1285943],[335553,1285944],[335553,1285945],[335553,1285946],[335553,1285947],[335552,1285947],[335552,1285948],[335552,1285949],[335552,1285950],[335551,1285950],[335551,1285951],[335551,1285952],[335551,1285953],[335551,1285954],[335551,1285955],[335550,1285955],[335550,1285956],[335550,1285957],[335550,1285958],[335550,1285959],[335549,1285959],[335549,1285960],[335549,1285961],[335549,1285962],[335549,1285963],[335548,1285963],[335548,1285964],[335548,1285965],[335548,1285966],[335547,1285966],[335547,1285967],[335547,1285968],[335547,1285969],[335547,1285970],[335547,1285971],[335546,1285971],[335546,1285972],[335546,1285973],[335546,1285974],[335545,1285974],[335545,1285975],[335545,1285976],[335545,1285977],[335545,1285978],[335545,1285979],[335544,1285979],[335544,1285980],[335544,1285981],[335544,1285982],[335544,1285983],[335543,1285983],[335543,1285984],[335543,1285985],[335543,1285986],[335543,1285987],[335543,1285988],[335543,1285989],[335543,1285990],[335543,1285991],[335543,1285992],[335543,1285993],[335543,1285994],[335543,1285995],[335543,1285996],[335543,1285997],[335543,1285998],[335543,1285999],[335543,1286000],[335543,1286001],[335543,1286002],[335543,1286003],[335543,1286004],[335543,1286005],[335543,1286006],[335542,1286006],[335542,1286007],[335542,1286008],[335542,1286009],[335542,1286010],[335542,1286011],[335542,1286012],[335542,1286013],[335542,1286014],[335542,1286015],[335542,1286016],[335542,1286017],[335541,1286017],[335541,1286018],[335541,1286019],[335541,1286020],[335541,1286021],[335541,1286022],[335541,1286023],[335541,1286024],[335541,1286025],[335541,1286026],[335541,1286027],[335540,1286027],[335540,1286028],[335540,1286029],[335540,1286030],[335540,1286031],[335540,1286032],[335540,1286033],[335540,1286034],[335540,1286035],[335540,1286036],[335540,1286037],[335540,1286038],[335540,1286039],[335540,1286040],[335539,1286040],[335539,1286041],[335539,1286042],[335539,1286043],[335539,1286044],[335539,1286045],[335539,1286046],[335539,1286047],[335539,1286048],[335539,1286049],[335538,1286049],[335538,1286050],[335538,1286051],[335538,1286052],[335538,1286053],[335538,1286054],[335538,1286055],[335538,1286056],[335538,1286057],[335537,1286057],[335537,1286058],[335537,1286059],[335537,1286060],[335537,1286061],[335537,1286062],[335537,1286063],[335537,1286064],[335537,1286065],[335537,1286066],[335537,1286067],[335537,1286068],[335536,1286068],[335536,1286069],[335536,1286070],[335537,1286070],[335537,1286071],[335536,1286071],[335537,1286071],[335537,1286072],[335537,1286073],[335537,1286074],[335536,1286074],[335537,1286074],[335537,1286075],[335536,1286075],[335536,1286076],[335536,1286077],[335536,1286078],[335536,1286079],[335536,1286080],[335536,1286081],[335536,1286082],[335537,1286082],[335537,1286083],[335537,1286084],[335537,1286085],[335537,1286086],[335538,1286086],[335538,1286087],[335538,1286088],[335538,1286089],[335538,1286090],[335539,1286090],[335539,1286091],[335539,1286092],[335539,1286093],[335539,1286094],[335540,1286094],[335540,1286095],[335540,1286096],[335540,1286097],[335540,1286098],[335541,1286098],[335541,1286099],[335541,1286100],[335541,1286101],[335542,1286101],[335542,1286102],[335542,1286103],[335542,1286104],[335543,1286104],[335543,1286105],[335543,1286106],[335544,1286106],[335544,1286107],[335545,1286107],[335545,1286108],[335545,1286109],[335546,1286109],[335546,1286110],[335547,1286110],[335547,1286111],[335548,1286111],[335548,1286112],[335548,1286113],[335549,1286113],[335549,1286114],[335549,1286115],[335549,1286116],[335550,1286116],[335550,1286117],[335550,1286118],[335551,1286118],[335551,1286119],[335552,1286119],[335552,1286120],[335552,1286121],[335552,1286122],[335553,1286122],[335553,1286123],[335553,1286124],[335553,1286125],[335554,1286125],[335554,1286126],[335554,1286127],[335554,1286128],[335554,1286129],[335555,1286129],[335555,1286130],[335555,1286131],[335555,1286132],[335554,1286132],[335554,1286133],[335554,1286134],[335554,1286135],[335554,1286136],[335554,1286137],[335555,1286137],[335555,1286138],[335555,1286139],[335555,1286140],[335556,1286140],[335556,1286141],[335557,1286141],[335557,1286142],[335557,1286143],[335558,1286143],[335558,1286144],[335559,1286144],[335559,1286145],[335559,1286146],[335560,1286146],[335560,1286147],[335561,1286147],[335561,1286148],[335562,1286148],[335562,1286149],[335562,1286150],[335563,1286150],[335563,1286151],[335563,1286152],[335563,1286153],[335564,1286153],[335564,1286154],[335564,1286155],[335565,1286155],[335565,1286156],[335565,1286157],[335565,1286158],[335565,1286159],[335566,1286159],[335566,1286160],[335566,1286161],[335566,1286162],[335567,1286162],[335567,1286163],[335567,1286164],[335567,1286165],[335568,1286165],[335568,1286166],[335568,1286167],[335569,1286167],[335569,1286168],[335569,1286169],[335569,1286170],[335570,1286170],[335570,1286171],[335570,1286172],[335571,1286172],[335571,1286173],[335571,1286174],[335571,1286175],[335572,1286175],[335572,1286176],[335572,1286177],[335572,1286178],[335573,1286178],[335573,1286179],[335573,1286180],[335574,1286180],[335574,1286181],[335574,1286182],[335575,1286182],[335575,1286183],[335575,1286184],[335575,1286185],[335575,1286186],[335575,1286187],[335576,1286187],[335576,1286188],[335576,1286189],[335577,1286189],[335577,1286190],[335577,1286191],[335577,1286192],[335577,1286193],[335578,1286193],[335578,1286194],[335578,1286195],[335579,1286195],[335579,1286196],[335579,1286197],[335579,1286198],[335580,1286198],[335580,1286199],[335580,1286200],[335580,1286201],[335581,1286201],[335581,1286202],[335581,1286203],[335582,1286203],[335582,1286204],[335582,1286205],[335582,1286206],[335583,1286206],[335583,1286207],[335583,1286208],[335584,1286208],[335584,1286209],[335584,1286210],[335585,1286210],[335585,1286211],[335585,1286212],[335585,1286213],[335585,1286214],[335586,1286214],[335586,1286215],[335586,1286216],[335586,1286217],[335587,1286217],[335587,1286218],[335587,1286219],[335587,1286220],[335587,1286221],[335588,1286221],[335588,1286222],[335588,1286223],[335588,1286224],[335588,1286225],[335589,1286225],[335589,1286226],[335589,1286227],[335589,1286228],[335589,1286229],[335590,1286229],[335590,1286230],[335590,1286231],[335590,1286232],[335590,1286233],[335591,1286233],[335591,1286234],[335591,1286235],[335591,1286236],[335591,1286237],[335592,1286237],[335592,1286238],[335592,1286239],[335592,1286240],[335593,1286240],[335593,1286241],[335593,1286242],[335593,1286243],[335593,1286244],[335594,1286244],[335594,1286245],[335594,1286246],[335594,1286247],[335594,1286248],[335595,1286248],[335595,1286249],[335595,1286250],[335595,1286251],[335595,1286252],[335596,1286252],[335596,1286253],[335596,1286254],[335596,1286255],[335597,1286255],[335597,1286256],[335597,1286257],[335597,1286258],[335598,1286258],[335598,1286259],[335598,1286260],[335598,1286261],[335598,1286262],[335598,1286263],[335599,1286263],[335599,1286264],[335599,1286265],[335599,1286266],[335600,1286266],[335600,1286267],[335600,1286268],[335600,1286269],[335600,1286270],[335601,1286270],[335601,1286271],[335601,1286272],[335601,1286273],[335602,1286273],[335602,1286274],[335602,1286275],[335602,1286276],[335602,1286277],[335603,1286277],[335603,1286278],[335603,1286279],[335603,1286280],[335604,1286280],[335604,1286281],[335604,1286282],[335604,1286283],[335604,1286284],[335605,1286284],[335605,1286285],[335605,1286286],[335605,1286287],[335605,1286288],[335606,1286288],[335606,1286289],[335606,1286290],[335606,1286291],[335607,1286291],[335607,1286292],[335607,1286293],[335607,1286294],[335607,1286295],[335608,1286295],[335608,1286296],[335608,1286297],[335608,1286298],[335609,1286298],[335609,1286299],[335609,1286300],[335609,1286301],[335609,1286302],[335610,1286302],[335610,1286303],[335610,1286304],[335610,1286305],[335611,1286305],[335611,1286306],[335611,1286307],[335611,1286308],[335612,1286308],[335612,1286309],[335612,1286310],[335612,1286311],[335612,1286312],[335613,1286312],[335613,1286313],[335613,1286314],[335613,1286315],[335613,1286316],[335614,1286316],[335614,1286317],[335614,1286318],[335614,1286319],[335615,1286319],[335615,1286320],[335615,1286321],[335616,1286321],[335616,1286322],[335616,1286323],[335616,1286324],[335616,1286325],[335616,1286326],[335617,1286326],[335617,1286327],[335617,1286328],[335617,1286329],[335617,1286330],[335617,1286331],[335618,1286331],[335618,1286332],[335618,1286333],[335618,1286334],[335619,1286334],[335619,1286335],[335619,1286336],[335619,1286337],[335619,1286338],[335620,1286338],[335620,1286339],[335620,1286340],[335620,1286341],[335620,1286342],[335620,1286343],[335619,1286343],[335619,1286344],[335619,1286345],[335620,1286345],[335621,1286345],[335622,1286345],[335622,1286344],[335623,1286344],[335624,1286344],[335625,1286344],[335625,1286345],[335625,1286346],[335625,1286347],[335625,1286348],[335625,1286349],[335625,1286350],[335625,1286351],[335625,1286352],[335625,1286353],[335625,1286354],[335625,1286355],[335625,1286356],[335625,1286357],[335624,1286357],[335624,1286358],[335624,1286359],[335624,1286360],[335624,1286361],[335624,1286362],[335624,1286363],[335624,1286364],[335624,1286365],[335624,1286366],[335624,1286367],[335623,1286367],[335623,1286368],[335623,1286369],[335623,1286370],[335623,1286371],[335623,1286372],[335623,1286373],[335623,1286374],[335623,1286375],[335623,1286376],[335623,1286377],[335622,1286377],[335622,1286378],[335622,1286379],[335622,1286380],[335622,1286381],[335622,1286382],[335622,1286383],[335622,1286384],[335622,1286385],[335622,1286386],[335622,1286387],[335622,1286388],[335622,1286389],[335622,1286390],[335622,1286391],[335621,1286391],[335621,1286392],[335621,1286393],[335621,1286394],[335621,1286395],[335621,1286396],[335621,1286397],[335621,1286398],[335621,1286399],[335621,1286400],[335621,1286401],[335621,1286402],[335621,1286403],[335621,1286404],[335621,1286405],[335620,1286405],[335620,1286406],[335620,1286407],[335620,1286408],[335620,1286409],[335620,1286410],[335620,1286411],[335620,1286412],[335620,1286413],[335620,1286414],[335619,1286414],[335619,1286415],[335619,1286416],[335619,1286417],[335619,1286418],[335619,1286419],[335619,1286420],[335619,1286421],[335619,1286422],[335619,1286423],[335619,1286424],[335619,1286425],[335619,1286426],[335619,1286427],[335619,1286428],[335618,1286428],[335618,1286429],[335618,1286430],[335618,1286431],[335618,1286432],[335618,1286433],[335618,1286434],[335618,1286435],[335618,1286436],[335618,1286437],[335618,1286438],[335618,1286439],[335618,1286440],[335618,1286441],[335618,1286442],[335617,1286442],[335617,1286443],[335617,1286444],[335617,1286445],[335617,1286446],[335617,1286447],[335617,1286448],[335617,1286449],[335617,1286450],[335617,1286451],[335617,1286452],[335616,1286452],[335616,1286453],[335616,1286454],[335616,1286455],[335616,1286456],[335616,1286457],[335616,1286458],[335616,1286459],[335616,1286460],[335616,1286461],[335616,1286462],[335616,1286463],[335616,1286464],[335616,1286465],[335616,1286466],[335616,1286467],[335615,1286467],[335615,1286468],[335615,1286469],[335615,1286470],[335615,1286471],[335615,1286472],[335615,1286473],[335615,1286474],[335615,1286475],[335615,1286476],[335615,1286477],[335615,1286478],[335615,1286479],[335615,1286480],[335616,1286480],[335616,1286481],[335616,1286482],[335617,1286482],[335617,1286483],[335618,1286483],[335618,1286484],[335618,1286485],[335619,1286485],[335619,1286486],[335620,1286486],[335620,1286487],[335621,1286487],[335621,1286488],[335621,1286489],[335622,1286489],[335622,1286490],[335622,1286491],[335623,1286491],[335623,1286492],[335623,1286493],[335624,1286493],[335624,1286494],[335624,1286495],[335624,1286496],[335625,1286496],[335625,1286497],[335625,1286498],[335625,1286499],[335626,1286499],[335626,1286500],[335626,1286501],[335627,1286501],[335627,1286502],[335627,1286503],[335627,1286504],[335628,1286504],[335628,1286505],[335628,1286506],[335628,1286507],[335628,1286508],[335628,1286509],[335628,1286510],[335627,1286510],[335627,1286511],[335626,1286511],[335626,1286512],[335625,1286512],[335625,1286513],[335624,1286513],[335624,1286514],[335624,1286515],[335624,1286516],[335624,1286517],[335624,1286518],[335624,1286519],[335624,1286520],[335624,1286521],[335624,1286522],[335624,1286523],[335624,1286524],[335624,1286525],[335624,1286526],[335623,1286526],[335623,1286527],[335623,1286528],[335623,1286529],[335623,1286530],[335623,1286531],[335623,1286532],[335623,1286533],[335622,1286533],[335622,1286534],[335622,1286535],[335621,1286535],[335621,1286536],[335621,1286537],[335621,1286538],[335621,1286539],[335620,1286539],[335620,1286540],[335620,1286541],[335620,1286542],[335619,1286542],[335619,1286543],[335619,1286544],[335619,1286545],[335619,1286546],[335618,1286546],[335618,1286547],[335618,1286548],[335618,1286549],[335618,1286550],[335618,1286551],[335618,1286552],[335618,1286553],[335617,1286553],[335617,1286554],[335617,1286555],[335617,1286556],[335617,1286557],[335617,1286558],[335617,1286559],[335617,1286560],[335617,1286561],[335617,1286562],[335616,1286562],[335616,1286563],[335616,1286564],[335616,1286565],[335616,1286566],[335616,1286567],[335616,1286568],[335616,1286569],[335615,1286569],[335615,1286570],[335614,1286570],[335613,1286570],[335612,1286570],[335611,1286570],[335610,1286570],[335609,1286570],[335608,1286570],[335607,1286570],[335606,1286570],[335605,1286570],[335604,1286570],[335603,1286570]],\"segment\":{\"id\":4371584,\"resource_state\":2,\"name\":\"Bridge to Bridge\",\"activity_type\":\"Ride\",\"distance\":10795.0,\"average_grade\":-0.0,\"maximum_grade\":42.6,\"elevation_high\":49.3,\"elevation_low\":0.0,\"start_latlng\":[37.685983,-122.397959],\"end_latlng\":[37.776439,-122.389809],\"start_latitude\":37.685983,\"start_longitude\":-122.397959,\"end_latitude\":37.776439,\"end_longitude\":-122.389809,\"climb_category\":0,\"city\":\"Brisbane\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":3,\"points\":\"kp_eFfz`jVOT]\\\\QXm@p@w@bAe@\\\\u@R{@?q@Me@UiBqAME{A]_Eu@I?k@Eu@BoB\\\\}Dx@cBf@_AJiE|@m@V_BXm@No@JyA^mAPqA\\\\a@DUHa@Fi@R_@Fy@B{G?m@CkDDkJh@eHh@e@@s@?eBF}ANgCLiBPgCN_BTiBF_AJsBFqAC{DF_AAs@QsASeBa@gAQk@ScDw@c@Ok@KQGg@a@wBqBaAu@eCcAMUWO_FiBo@Ge@AqCHc@Cy@Uu@g@a@_@qDyCg@[_A_@]Io@a@G?yA]mC}@cAc@qFoBUKy@UUKGGaAi@s@GYIK?qBw@{Aa@}@_@kAa@aBo@cBi@WM]MWM_@c@MGG?i@OwAUuAa@yBg@y@K]Mc@McAQ{Ac@UE[C}@Wa@QmASsAa@cCg@eG}AgB_@gAY}A]KE}DeAuD{@OAcA]m@KkI}BqDy@_@MQOkASsCw@s@MYOQQIEi@AeAQw@SG?gB_@yBo@_ASs@CcCHIEEI@KJa@^aA@MCYEKEISGS@a@Ck@HiADc@@SBiB@[@SDi@?UD_@AeBR{AT{ENwBLqBFo@DwDL}DTuBDUBSFcCPkCL_@AqADiAFw@HmBBeAFo@HoCFuHf@}@?}@Fk@Hm@AmADg@@oEVmDLg@Ak@s@gCsB[][Su@m@iHiC}Ao@WE}@Kc@FSLQRm@dASRWH{@Bq@FuADe@AcBHe@@kAJM?o@NIBSP}Af@kB\\\\g@TuAZOH]Ha@D{ADWB}@B}@D}@Ns@BiANg@@oANQNGX?j@HbDAt@BrA?b@\"}},{\"segment_id\":4648795,\"start_latlng\":[37.80631600879133,-122.47548200190067],\"end_latlng\":[37.789746997877955,-122.45941498316824],\"tile_steps\":[[335104,1286790],[335104,1286789],[335103,1286789],[335103,1286788],[335102,1286788],[335102,1286787],[335102,1286786],[335102,1286785],[335101,1286785],[335101,1286784],[335101,1286783],[335100,1286783],[335100,1286782],[335100,1286781],[335099,1286781],[335099,1286780],[335099,1286779],[335099,1286778],[335100,1286778],[335100,1286777],[335101,1286777],[335101,1286776],[335102,1286776],[335102,1286775],[335103,1286775],[335103,1286774],[335103,1286773],[335103,1286772],[335103,1286771],[335102,1286771],[335102,1286770],[335102,1286769],[335101,1286769],[335101,1286768],[335101,1286767],[335100,1286767],[335100,1286766],[335100,1286765],[335099,1286765],[335099,1286764],[335099,1286763],[335098,1286763],[335098,1286762],[335098,1286761],[335097,1286761],[335097,1286760],[335096,1286760],[335096,1286759],[335095,1286759],[335095,1286758],[335095,1286757],[335094,1286757],[335094,1286756],[335093,1286756],[335093,1286755],[335093,1286754],[335093,1286753],[335092,1286753],[335092,1286752],[335092,1286751],[335091,1286751],[335091,1286750],[335091,1286749],[335090,1286749],[335090,1286748],[335090,1286747],[335089,1286747],[335089,1286746],[335089,1286745],[335089,1286744],[335089,1286743],[335089,1286742],[335089,1286741],[335090,1286741],[335090,1286740],[335090,1286739],[335090,1286738],[335090,1286737],[335091,1286737],[335091,1286736],[335091,1286735],[335092,1286735],[335092,1286734],[335092,1286733],[335092,1286732],[335093,1286732],[335093,1286731],[335094,1286731],[335094,1286730],[335095,1286730],[335095,1286729],[335095,1286728],[335096,1286728],[335096,1286727],[335097,1286727],[335097,1286726],[335097,1286725],[335097,1286724],[335097,1286723],[335097,1286722],[335096,1286722],[335096,1286721],[335095,1286721],[335095,1286720],[335095,1286719],[335094,1286719],[335094,1286718],[335093,1286718],[335093,1286717],[335092,1286717],[335092,1286716],[335091,1286716],[335091,1286715],[335091,1286714],[335091,1286713],[335091,1286712],[335091,1286711],[335092,1286711],[335092,1286710],[335092,1286709],[335093,1286709],[335093,1286708],[335094,1286708],[335094,1286707],[335095,1286707],[335095,1286706],[335096,1286706],[335096,1286705],[335097,1286705],[335097,1286704],[335098,1286704],[335098,1286703],[335099,1286703],[335099,1286702],[335100,1286702],[335100,1286701],[335101,1286701],[335101,1286700],[335102,1286700],[335102,1286699],[335102,1286698],[335103,1286698],[335103,1286697],[335104,1286697],[335105,1286697],[335105,1286696],[335106,1286696],[335106,1286697],[335107,1286697],[335108,1286697],[335109,1286697],[335109,1286698],[335110,1286698],[335110,1286699],[335111,1286699],[335112,1286699],[335112,1286700],[335113,1286700],[335113,1286701],[335114,1286701],[335115,1286701],[335115,1286702],[335116,1286702],[335117,1286702],[335118,1286702],[335119,1286702],[335120,1286702],[335121,1286702],[335122,1286702],[335123,1286702],[335123,1286703],[335124,1286703],[335125,1286703],[335125,1286704],[335126,1286704],[335127,1286704],[335127,1286705],[335128,1286705],[335129,1286705],[335130,1286705],[335131,1286705],[335131,1286706],[335132,1286706],[335133,1286706],[335133,1286707],[335134,1286707],[335135,1286707],[335135,1286708],[335136,1286708],[335137,1286708],[335138,1286708],[335139,1286708],[335140,1286708],[335140,1286707],[335141,1286707],[335141,1286706],[335142,1286706],[335143,1286706],[335143,1286705],[335144,1286705],[335144,1286706],[335145,1286706],[335146,1286706],[335146,1286707],[335147,1286707],[335147,1286708],[335148,1286708],[335149,1286708],[335149,1286709],[335150,1286709],[335151,1286709],[335151,1286710],[335152,1286710],[335153,1286710],[335153,1286711],[335154,1286711],[335154,1286712],[335155,1286712],[335155,1286713],[335156,1286713],[335156,1286714],[335157,1286714],[335157,1286715],[335158,1286715],[335159,1286715],[335160,1286715],[335161,1286715],[335162,1286715],[335163,1286715],[335164,1286715],[335165,1286715],[335165,1286714],[335166,1286714],[335166,1286713],[335167,1286713],[335167,1286712],[335167,1286711],[335168,1286711],[335168,1286710],[335169,1286710],[335169,1286709],[335170,1286709],[335170,1286708],[335170,1286707],[335171,1286707],[335171,1286706],[335172,1286706],[335172,1286705],[335173,1286705],[335174,1286705],[335175,1286705],[335175,1286704],[335176,1286704],[335177,1286704],[335178,1286704],[335178,1286703],[335179,1286703],[335179,1286702],[335180,1286702],[335180,1286701],[335180,1286700],[335181,1286700],[335181,1286699],[335181,1286698],[335181,1286697],[335182,1286697],[335182,1286696],[335183,1286696],[335183,1286695],[335183,1286694],[335184,1286694],[335184,1286693],[335185,1286693],[335185,1286692],[335186,1286692],[335186,1286691],[335187,1286691],[335187,1286690],[335187,1286689],[335188,1286689],[335189,1286689],[335189,1286688],[335190,1286688],[335191,1286688],[335192,1286688],[335192,1286687],[335193,1286687],[335194,1286687],[335195,1286687],[335196,1286687],[335197,1286687],[335197,1286686],[335198,1286686],[335199,1286686],[335199,1286685],[335200,1286685],[335200,1286684],[335201,1286684],[335201,1286683],[335201,1286682],[335201,1286681],[335201,1286680],[335201,1286679],[335201,1286678],[335201,1286677],[335200,1286677],[335201,1286677],[335201,1286676],[335201,1286675],[335201,1286674],[335201,1286673],[335202,1286673],[335202,1286672],[335202,1286671],[335202,1286670],[335201,1286670],[335200,1286670],[335200,1286669],[335199,1286669],[335199,1286668],[335198,1286668]],\"segment\":{\"id\":4648795,\"resource_state\":2,\"name\":\"Bridge to Arguello Gate\",\"activity_type\":\"Ride\",\"distance\":3744.7,\"average_grade\":0.9,\"maximum_grade\":13.3,\"elevation_high\":115.8,\"elevation_low\":66.4,\"start_latlng\":[37.806316,-122.475482],\"end_latlng\":[37.789747,-122.459415],\"start_latitude\":37.806316,\"start_longitude\":-122.475482,\"end_latitude\":37.789747,\"end_longitude\":-122.459415,\"climb_category\":0,\"city\":\"San Francisco\",\"state\":\"CA\",\"country\":\"United States\",\"private\":false,\"hazardous\":false,\"starred\":true,\"live_rating\":1,\"points\":\"m`weFx~ojVTN\\\\h@lAXhBdATFV?XC`@OTWVq@NWHCj@@r@Lr@X`@TXRv@^hBhA`@Z\\\\b@z@v@f@ZzAf@pAp@j@`@l@Jr@Dt@KhAWjBq@d@Ul@_@hAeA~@u@f@KV?TDp@XbAx@zAbBHFXFh@CZIp@[`@[\\\\c@j@eAp@aApAcBlAu@b@g@FcAOeAQg@aByDOiAB{CEq@IYq@}AIYG[QuBQw@Ys@Us@G[E]By@Xq@l@eABQ?SEg@Q_@a@m@Su@a@kBk@qA_AeAWa@GSKm@A_BHeAFWj@u@bBaBd@Yr@m@\\\\gAf@uD\\\\e@dBi@z@g@NSfB{AjAuAVi@Nq@F_DFWhA}CLQRCx@FjBJp@G|Ac@LA\\\\JXz@b@dA\"}}],\"bounds\":[[35.22763572621081,-120.7605191653956],[35.317486473789174,-120.6504638346044]]}";
    String MOCK_DATA = d1 + d2;

    try {
      if(false) { // change to true to use API call instead of mock data
        BufferedReader br = getHttpsResponse("https://www.strava.com/api/v3/segment_targets?latlng=[" + latitude + "," + longitude + "]&activity_type=1");
        Optional<String> resp = br.lines().reduce(String::concat);
        if (resp.isPresent()) {
          MOCK_DATA = resp.get();
        }
      }
      JSONParser parser = new JSONParser();
      Object obj = parser.parse(MOCK_DATA);
      JSONObject json = (JSONObject)obj;
      JSONArray targets = (JSONArray)json.get("targets");
      for(int i = 0; i < targets.size(); ++i){
        JSONObject seg = (JSONObject)((JSONObject)(targets.get(i))).get("segment");
        double distance = (double)seg.get("distance");
        int climbCategory = ((Long)seg.get("climb_category")).intValue();
        JSONArray startLatLang = (JSONArray)seg.get("start_latlng");
        double startLat = (double)startLatLang.get(0);
        double startLong = (double)startLatLang.get(1);
        segmentTargets.add(new Segment(distance, climbCategory, startLong, startLat));
      }
    } catch (ParseException e) {
      e.printStackTrace();
    }

    return segmentTargets;
  }

  public List<Segment> getStarredSegments(int athleteId) {
    List<Segment> starredSegments = new ArrayList<>();
    try {
      BufferedReader br = getHttpsResponse("https://www.strava.com/api/v3/athletes/" + athleteId + "/segments/starred");
      Optional<String> resp = br.lines().reduce(String::concat);
      if(resp.isPresent()){
        JSONParser parser = new JSONParser();
        Object obj = parser.parse(resp.get());
        JSONArray json = (JSONArray)obj;
        for(int i  = 0; i < json.size(); ++i){
          JSONObject seg = (JSONObject)(json.get(i));
          double distance = (double)seg.get("distance");
          int climbCategory = ((Long)seg.get("climb_category")).intValue();
          JSONArray startLatLang = (JSONArray)seg.get("start_latlng");
          double startLat = (double)startLatLang.get(0);
          double startLong = (double)startLatLang.get(1);
          starredSegments.add(new Segment(distance, climbCategory, startLong, startLat));
        }
      }
    } catch (ParseException e) {
      e.printStackTrace();
    }
    System.out.println("Found " + starredSegments.size() + " starred segments");
    return starredSegments;
  }

  public Activity getActivity(String activityId) {
    Activity activity = null;
    try {
      BufferedReader br = getHttpsResponse("https://www.strava.com/api/v3/activities/" + activityId);
      Optional<String> resp = br.lines().reduce(String::concat);
      if(resp.isPresent()){
        JSONParser parser = new JSONParser();
        JSONObject activityObj = (JSONObject) parser.parse(resp.get());
        JSONArray segmentEfforts = (JSONArray) activityObj.get("segment_efforts");
        List<SegmentEffort> segmentEffortList = new ArrayList<>();
        for (int i = 0; i < segmentEfforts.size(); ++i) {
          JSONObject segmentEffort = (JSONObject) segmentEfforts.get(i);
          int climbingCategory = (int) segmentEffort.getOrDefault("climb_category", 1);
          segmentEffortList.add(new SegmentEffort(climbingCategory));
        }
        activity = new Activity(segmentEffortList);
      }
    } catch (ParseException e) {
      e.printStackTrace();
    }
    return activity;
  }

  public List<Activity> getActivities() {
    List<Activity> activities = new ArrayList<>();
    try {
      BufferedReader br = getHttpsResponse("https://www.strava.com/api/v3/athlete/activities");
      Optional<String> resp = br.lines().reduce(String::concat);
      if(resp.isPresent()){
        JSONParser parser = new JSONParser();
        Object obj = parser.parse(resp.get());
        JSONArray json = (JSONArray)obj;
        for(int i  = 0; i < json.size(); ++i){
          JSONObject activity = (JSONObject)(json.get(i));
          long id = (long) activity.get("id");
          activities.add(getActivity("" + id));
        }
      }
    } catch (ParseException e) {
      e.printStackTrace();
    }
    return activities;
  }
}